<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>漢字道 - Daily Kanji Challenge</title>
    <link href="https://fonts.googleapis.com/css2?family=Zen+Kaku+Gothic+New:wght@400;500;700&family=Shippori+Mincho:wght@400;600;800&display=swap" rel="stylesheet">
    <script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-2936158828082668"
     crossorigin="anonymous"></script>
    <style>
        :root {
            --ink: #1a1a1a;
            --paper: #f5f1e8;
            --cream: #faf8f3;
            --vermillion: #d64933;
            --gold: #c9a227;
            --moss: #6b7c5e;
            --shadow: rgba(26, 26, 26, 0.08);
            --correct: #4a7c59;
            --incorrect: #c44536;
        }

        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Zen Kaku Gothic New', sans-serif;
            background: var(--paper);
            color: var(--ink);
            min-height: 100vh;
            overflow-x: hidden;
        }

        /* Washi paper texture overlay */
        body::before {
            content: '';
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background-image: 
                url("data:image/svg+xml,%3Csvg viewBox='0 0 400 400' xmlns='http://www.w3.org/2000/svg'%3E%3Cfilter id='noiseFilter'%3E%3CfeTurbulence type='fractalNoise' baseFrequency='0.9' numOctaves='4' stitchTiles='stitch'/%3E%3C/filter%3E%3Crect width='100%25' height='100%25' filter='url(%23noiseFilter)'/%3E%3C/svg%3E");
            opacity: 0.03;
            pointer-events: none;
            z-index: 1000;
        }

        /* Header */
        header {
            text-align: center;
            padding: 2rem 1rem 1rem;
            border-bottom: 1px solid rgba(26, 26, 26, 0.1);
            background: linear-gradient(180deg, var(--cream) 0%, var(--paper) 100%);
            position: relative;
        }

        .logo {
            font-family: 'Shippori Mincho', serif;
            font-size: 2.5rem;
            font-weight: 800;
            letter-spacing: 0.2em;
            color: var(--ink);
            position: relative;
            display: inline-block;
        }

        .logo::before {
            content: '漢字道';
            position: absolute;
            top: -0.5rem;
            left: 50%;
            transform: translateX(-50%);
            font-size: 0.9rem;
            letter-spacing: 0.5em;
            color: var(--vermillion);
            font-weight: 400;
        }

        .subtitle {
            font-size: 0.75rem;
            letter-spacing: 0.3em;
            text-transform: uppercase;
            color: var(--moss);
            margin-top: 0.5rem;
        }

        .date-display {
            font-size: 0.85rem;
            color: var(--ink);
            opacity: 0.6;
            margin-top: 0.75rem;
            font-weight: 500;
        }

        .header-nav {
            display: flex;
            justify-content: center;
            gap: 1.5rem;
            margin-top: 1rem;
            padding-top: 1rem;
            border-top: 1px solid rgba(26, 26, 26, 0.08);
        }

        .header-nav a {
            font-size: 0.8rem;
            color: var(--moss);
            text-decoration: none;
            letter-spacing: 0.05em;
            transition: color 0.2s ease;
        }

        .header-nav a:hover {
            color: var(--ink);
        }

        /* Policy Pages */
        .policy-page {
            padding: 1rem 0 2rem;
        }

        .policy-title {
            font-family: 'Shippori Mincho', serif;
            font-size: 2rem;
            font-weight: 800;
            text-align: center;
            margin-bottom: 0.25rem;
        }

        .policy-subtitle {
            font-family: 'Shippori Mincho', serif;
            font-size: 1rem;
            color: var(--vermillion);
            text-align: center;
            margin-bottom: 0.5rem;
        }

        .policy-date {
            font-size: 0.8rem;
            color: var(--moss);
            text-align: center;
            margin-bottom: 2rem;
        }

        .policy-content {
            background: var(--cream);
            border: 1px solid rgba(26, 26, 26, 0.1);
            padding: 2rem;
            margin-bottom: 2rem;
        }

        .policy-content h3 {
            font-family: 'Shippori Mincho', serif;
            font-size: 1.2rem;
            font-weight: 600;
            margin: 1.5rem 0 0.75rem;
            color: var(--ink);
        }

        .policy-content h3:first-child {
            margin-top: 0;
        }

        .policy-content h4 {
            font-size: 1rem;
            font-weight: 600;
            margin: 1rem 0 0.5rem;
            color: var(--ink);
        }

        .policy-content p {
            font-size: 0.95rem;
            line-height: 1.7;
            margin-bottom: 0.75rem;
            color: var(--ink);
            opacity: 0.85;
        }

        .policy-content ul {
            margin: 0.75rem 0 1rem 1.5rem;
        }

        .policy-content li {
            font-size: 0.95rem;
            line-height: 1.7;
            margin-bottom: 0.4rem;
            color: var(--ink);
            opacity: 0.85;
        }

        .policy-content a {
            color: var(--vermillion);
            text-decoration: none;
        }

        .policy-content a:hover {
            text-decoration: underline;
        }

        /* Contact Form */
        .contact-form {
            margin: 1.5rem 0;
        }

        .form-group {
            margin-bottom: 1.25rem;
        }

        .form-group label {
            display: block;
            font-size: 0.85rem;
            font-weight: 500;
            margin-bottom: 0.5rem;
            color: var(--ink);
        }

        .form-group input,
        .form-group select,
        .form-group textarea {
            font-family: 'Zen Kaku Gothic New', sans-serif;
            font-size: 1rem;
            width: 100%;
            padding: 0.75rem 1rem;
            border: 1px solid rgba(26, 26, 26, 0.2);
            background: var(--paper);
            color: var(--ink);
            outline: none;
            transition: border-color 0.2s ease;
        }

        .form-group input:focus,
        .form-group select:focus,
        .form-group textarea:focus {
            border-color: var(--ink);
        }

        .form-group textarea {
            resize: vertical;
            min-height: 120px;
        }

        .form-group select {
            cursor: pointer;
        }

        .contact-success {
            text-align: center;
            padding: 2rem;
            background: rgba(74, 124, 89, 0.1);
            border: 1px solid var(--correct);
            margin: 1.5rem 0;
        }

        .contact-success .feedback-icon {
            font-size: 2.5rem;
            color: var(--correct);
            margin-bottom: 0.5rem;
        }

        /* Footer */
        footer {
            background: var(--cream);
            border-top: 1px solid rgba(26, 26, 26, 0.1);
            padding: 2rem 1rem;
            margin-top: 2rem;
        }

        .footer-content {
            max-width: 600px;
            margin: 0 auto;
            text-align: center;
        }

        .footer-links {
            display: flex;
            justify-content: center;
            flex-wrap: wrap;
            gap: 1.5rem;
            margin-bottom: 1.5rem;
        }

        .footer-links a {
            font-size: 0.85rem;
            color: var(--moss);
            text-decoration: none;
            transition: color 0.2s ease;
        }

        .footer-links a:hover {
            color: var(--ink);
        }

        .footer-copy {
            font-size: 0.8rem;
            color: var(--ink);
            opacity: 0.6;
            margin-bottom: 0.5rem;
        }

        .footer-disclaimer {
            font-size: 0.75rem;
            color: var(--moss);
            line-height: 1.5;
            max-width: 400px;
            margin: 0 auto;
        }

        /* Main container */
        main {
            max-width: 600px;
            margin: 0 auto;
            padding: 2rem 1.5rem 4rem;
        }

        /* Game states */
        .screen {
            display: none;
            animation: fadeIn 0.5s ease;
        }

        .screen.active {
            display: block;
        }

        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(10px); }
            to { opacity: 1; transform: translateY(0); }
        }

        /* Start screen */
        .start-screen {
            text-align: center;
            padding: 3rem 0;
        }

        .intro-text {
            font-family: 'Shippori Mincho', serif;
            font-size: 1.1rem;
            line-height: 1.8;
            margin-bottom: 2rem;
            color: var(--ink);
            opacity: 0.8;
        }

        .game-modes {
            display: flex;
            flex-direction: column;
            gap: 1rem;
            margin-top: 2rem;
        }

        .mode-btn {
            font-family: 'Zen Kaku Gothic New', sans-serif;
            font-size: 1rem;
            font-weight: 500;
            padding: 1.25rem 2rem;
            border: 2px solid var(--ink);
            background: transparent;
            color: var(--ink);
            cursor: pointer;
            transition: all 0.3s ease;
            position: relative;
            overflow: hidden;
        }

        .mode-btn::before {
            content: '';
            position: absolute;
            top: 0;
            left: -100%;
            width: 100%;
            height: 100%;
            background: var(--ink);
            transition: left 0.3s ease;
            z-index: -1;
        }

        .mode-btn:hover {
            color: var(--paper);
        }

        .mode-btn:hover::before {
            left: 0;
        }

        .mode-btn .japanese {
            font-family: 'Shippori Mincho', serif;
            font-size: 0.85rem;
            display: block;
            margin-top: 0.25rem;
            opacity: 0.7;
        }

        /* Quiz screen */
        .quiz-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 2rem;
            padding-bottom: 1rem;
            border-bottom: 1px solid rgba(26, 26, 26, 0.1);
        }

        .progress-info {
            font-size: 0.85rem;
            color: var(--moss);
        }

        .timer {
            font-family: 'Shippori Mincho', serif;
            font-size: 1.5rem;
            font-weight: 600;
            color: var(--ink);
            min-width: 80px;
            text-align: right;
        }

        .timer.warning {
            color: var(--vermillion);
            animation: pulse 1s infinite;
        }

        @keyframes pulse {
            0%, 100% { opacity: 1; }
            50% { opacity: 0.5; }
        }

        .question-container {
            text-align: center;
            margin-bottom: 2rem;
        }

        .kanji-display {
            font-family: 'Shippori Mincho', serif;
            font-size: 8rem;
            font-weight: 800;
            color: var(--ink);
            line-height: 1;
            margin: 2rem 0;
            position: relative;
            display: inline-block;
        }

        .kanji-display::after {
            content: '';
            position: absolute;
            bottom: -0.5rem;
            left: 50%;
            transform: translateX(-50%);
            width: 60%;
            height: 3px;
            background: var(--vermillion);
            opacity: 0.6;
        }

        .question-type {
            font-size: 0.85rem;
            color: var(--moss);
            letter-spacing: 0.1em;
            text-transform: uppercase;
            margin-bottom: 1rem;
        }

        .word-display {
            font-family: 'Shippori Mincho', serif;
            font-size: 3rem;
            font-weight: 600;
            color: var(--ink);
            margin: 1.5rem 0;
        }

        .reading-hint {
            font-size: 1rem;
            color: var(--moss);
            margin-bottom: 1rem;
        }

        /* Answer options */
        .options-grid {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 1rem;
            margin-top: 2rem;
        }

        .option-btn {
            font-family: 'Zen Kaku Gothic New', sans-serif;
            font-size: 1rem;
            padding: 1.25rem 1rem;
            border: 1px solid rgba(26, 26, 26, 0.2);
            background: var(--cream);
            color: var(--ink);
            cursor: pointer;
            transition: all 0.2s ease;
            text-align: center;
            position: relative;
        }

        .option-btn:hover:not(:disabled) {
            border-color: var(--ink);
            transform: translateY(-2px);
            box-shadow: 0 4px 12px var(--shadow);
        }

        .option-btn.correct {
            background: var(--correct);
            color: white;
            border-color: var(--correct);
        }

        .option-btn.incorrect {
            background: var(--incorrect);
            color: white;
            border-color: var(--incorrect);
        }

        .option-btn:disabled {
            cursor: default;
            opacity: 0.7;
        }

        /* Text input mode */
        .input-container {
            margin-top: 2rem;
        }

        .answer-input {
            font-family: 'Zen Kaku Gothic New', sans-serif;
            font-size: 1.5rem;
            width: 100%;
            padding: 1rem;
            border: 2px solid rgba(26, 26, 26, 0.2);
            background: var(--cream);
            color: var(--ink);
            text-align: center;
            outline: none;
            transition: border-color 0.2s ease;
        }

        .answer-input:focus {
            border-color: var(--ink);
        }

        .answer-input::placeholder {
            color: rgba(26, 26, 26, 0.3);
        }

        .submit-btn {
            font-family: 'Zen Kaku Gothic New', sans-serif;
            font-size: 1rem;
            font-weight: 500;
            width: 100%;
            padding: 1rem;
            margin-top: 1rem;
            border: 2px solid var(--ink);
            background: var(--ink);
            color: var(--paper);
            cursor: pointer;
            transition: all 0.2s ease;
        }

        .submit-btn:hover {
            background: transparent;
            color: var(--ink);
        }

        /* Feedback */
        .feedback {
            text-align: center;
            padding: 1.5rem;
            margin-top: 1.5rem;
            border-radius: 4px;
            animation: slideUp 0.3s ease;
        }

        @keyframes slideUp {
            from { opacity: 0; transform: translateY(10px); }
            to { opacity: 1; transform: translateY(0); }
        }

        .feedback.correct {
            background: rgba(74, 124, 89, 0.1);
            border: 1px solid var(--correct);
        }

        .feedback.incorrect {
            background: rgba(196, 69, 54, 0.1);
            border: 1px solid var(--incorrect);
        }

        .feedback-icon {
            font-size: 2rem;
            margin-bottom: 0.5rem;
        }

        .feedback-text {
            font-weight: 500;
            margin-bottom: 0.5rem;
        }

        .correct-answer {
            font-family: 'Shippori Mincho', serif;
            font-size: 1.1rem;
            opacity: 0.8;
        }

        .next-btn {
            font-family: 'Zen Kaku Gothic New', sans-serif;
            font-size: 0.9rem;
            padding: 0.75rem 2rem;
            margin-top: 1rem;
            border: 1px solid currentColor;
            background: transparent;
            color: inherit;
            cursor: pointer;
            transition: all 0.2s ease;
        }

        .next-btn:hover {
            background: var(--ink);
            color: var(--paper);
            border-color: var(--ink);
        }

        /* Results screen */
        .results-screen {
            text-align: center;
            padding: 2rem 0;
        }

        .results-title {
            font-family: 'Shippori Mincho', serif;
            font-size: 2rem;
            font-weight: 800;
            margin-bottom: 0.5rem;
        }

        .results-subtitle {
            font-size: 0.9rem;
            color: var(--moss);
            margin-bottom: 2rem;
        }

        .score-display {
            background: var(--cream);
            padding: 2rem;
            margin: 2rem 0;
            border: 1px solid rgba(26, 26, 26, 0.1);
        }

        .score-number {
            font-family: 'Shippori Mincho', serif;
            font-size: 4rem;
            font-weight: 800;
            color: var(--vermillion);
            line-height: 1;
        }

        .score-label {
            font-size: 0.85rem;
            color: var(--moss);
            letter-spacing: 0.1em;
            text-transform: uppercase;
            margin-top: 0.5rem;
        }

        .stats-grid {
            display: grid;
            grid-template-columns: repeat(3, 1fr);
            gap: 1rem;
            margin: 2rem 0;
        }

        .stat-item {
            padding: 1rem;
            background: var(--cream);
            border: 1px solid rgba(26, 26, 26, 0.1);
        }

        .stat-value {
            font-family: 'Shippori Mincho', serif;
            font-size: 1.5rem;
            font-weight: 600;
            color: var(--ink);
        }

        .stat-label {
            font-size: 0.7rem;
            color: var(--moss);
            letter-spacing: 0.05em;
            text-transform: uppercase;
            margin-top: 0.25rem;
        }

        /* Share section */
        .share-section {
            margin-top: 2rem;
            padding-top: 2rem;
            border-top: 1px solid rgba(26, 26, 26, 0.1);
        }

        .share-grid {
            font-family: monospace;
            font-size: 1.2rem;
            line-height: 1.4;
            margin: 1rem 0;
            padding: 1rem;
            background: var(--cream);
            border: 1px solid rgba(26, 26, 26, 0.1);
        }

        .share-btn {
            font-family: 'Zen Kaku Gothic New', sans-serif;
            font-size: 0.9rem;
            font-weight: 500;
            padding: 1rem 2rem;
            border: 2px solid var(--ink);
            background: var(--ink);
            color: var(--paper);
            cursor: pointer;
            transition: all 0.2s ease;
            margin: 0.5rem;
        }

        .share-btn:hover {
            background: transparent;
            color: var(--ink);
        }

        .share-btn.copied {
            background: var(--correct);
            border-color: var(--correct);
        }

        /* Leaderboard */
        .leaderboard {
            margin-top: 2rem;
            text-align: left;
        }

        .leaderboard-title {
            font-family: 'Shippori Mincho', serif;
            font-size: 1.2rem;
            font-weight: 600;
            margin-bottom: 1rem;
            text-align: center;
        }

        .leaderboard-list {
            background: var(--cream);
            border: 1px solid rgba(26, 26, 26, 0.1);
        }

        .leaderboard-item {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 0.75rem 1rem;
            border-bottom: 1px solid rgba(26, 26, 26, 0.05);
        }

        .leaderboard-item:last-child {
            border-bottom: none;
        }

        .leaderboard-item.current {
            background: rgba(201, 162, 39, 0.1);
        }

        .rank {
            font-family: 'Shippori Mincho', serif;
            font-weight: 600;
            min-width: 2rem;
        }

        .rank.gold { color: var(--gold); }
        .rank.silver { color: #8c8c8c; }
        .rank.bronze { color: #b87333; }

        .player-name {
            flex: 1;
            margin-left: 1rem;
        }

        .player-score {
            font-weight: 500;
        }

        .player-time {
            font-size: 0.8rem;
            color: var(--moss);
            margin-left: 1rem;
        }

        /* Play again */
        .play-again-btn {
            font-family: 'Zen Kaku Gothic New', sans-serif;
            font-size: 0.9rem;
            padding: 0.75rem 2rem;
            margin-top: 2rem;
            border: 1px solid var(--moss);
            background: transparent;
            color: var(--moss);
            cursor: pointer;
            transition: all 0.2s ease;
        }

        .play-again-btn:hover {
            border-color: var(--ink);
            color: var(--ink);
        }

        /* Already played */
        .already-played {
            text-align: center;
            padding: 3rem 1rem;
        }

        .comeback-time {
            font-family: 'Shippori Mincho', serif;
            font-size: 2rem;
            font-weight: 600;
            color: var(--vermillion);
            margin: 1rem 0;
        }

        /* Decorative elements */
        .seal {
            width: 60px;
            height: 60px;
            background: var(--vermillion);
            border-radius: 4px;
            display: flex;
            align-items: center;
            justify-content: center;
            margin: 2rem auto;
            transform: rotate(-5deg);
            box-shadow: 0 2px 8px rgba(214, 73, 51, 0.3);
        }

        .seal-text {
            font-family: 'Shippori Mincho', serif;
            color: white;
            font-size: 1.5rem;
            font-weight: 800;
        }

        /* Personal Bests */
        .personal-bests {
            margin-top: 2rem;
            text-align: left;
        }

        .pb-item {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 0.75rem 1rem;
            border-bottom: 1px solid rgba(26, 26, 26, 0.05);
        }

        .pb-item:last-child {
            border-bottom: none;
        }

        .pb-item.current {
            background: rgba(201, 162, 39, 0.1);
        }

        .pb-item.new-record {
            background: rgba(74, 124, 89, 0.15);
        }

        .pb-label {
            font-weight: 500;
            flex: 1;
        }

        .pb-value {
            font-family: 'Shippori Mincho', serif;
            font-weight: 600;
            min-width: 60px;
            text-align: right;
        }

        .pb-date {
            font-size: 0.75rem;
            color: var(--moss);
            margin-left: 1rem;
            min-width: 80px;
            text-align: right;
        }

        .new-record-badge {
            background: var(--correct);
            color: white;
            font-size: 0.65rem;
            padding: 0.2rem 0.5rem;
            border-radius: 2px;
            margin-left: 0.5rem;
            text-transform: uppercase;
            letter-spacing: 0.05em;
            animation: glow 1.5s ease-in-out infinite;
        }

        @keyframes glow {
            0%, 100% { box-shadow: 0 0 5px rgba(74, 124, 89, 0.5); }
            50% { box-shadow: 0 0 15px rgba(74, 124, 89, 0.8); }
        }

        .no-pb {
            padding: 1.5rem;
            text-align: center;
            color: var(--moss);
            font-size: 0.9rem;
        }

        .improvement {
            font-size: 0.75rem;
            color: var(--correct);
            margin-left: 0.5rem;
        }

        .improvement.negative {
            color: var(--incorrect);
        }

        /* Responsive */
        @media (max-width: 768px) {
            header {
                padding: 1.5rem 1rem 0.75rem;
            }

            .logo {
                font-size: 2.2rem;
            }

            .logo::before {
                font-size: 0.8rem;
                top: -0.4rem;
            }

            main {
                padding: 1.5rem 1rem 3rem;
            }

            .intro-text {
                font-size: 1rem;
            }

            .seal {
                width: 50px;
                height: 50px;
                margin: 1.5rem auto;
            }

            .seal-text {
                font-size: 1.3rem;
            }

            .mode-btn {
                padding: 1rem 1.5rem;
            }

            .kanji-display {
                font-size: 7rem;
            }

            .word-display {
                font-size: 2.8rem;
            }

            .option-btn {
                padding: 1rem;
                font-size: 0.95rem;
            }

            .score-number {
                font-size: 3.5rem;
            }

            .stats-grid {
                grid-template-columns: repeat(3, 1fr);
                gap: 0.5rem;
            }

            .stat-item {
                padding: 0.75rem 0.5rem;
            }

            .stat-value {
                font-size: 1.3rem;
            }

            .stat-label {
                font-size: 0.65rem;
            }

            .share-grid {
                font-size: 1rem;
                padding: 0.75rem;
                word-break: break-all;
            }

            .share-btn {
                padding: 0.85rem 1.5rem;
                font-size: 0.85rem;
            }

            .pb-item {
                padding: 0.6rem 0.75rem;
                flex-wrap: wrap;
            }

            .pb-label {
                font-size: 0.9rem;
            }

            .pb-value {
                font-size: 0.9rem;
                min-width: 50px;
            }

            .pb-date {
                font-size: 0.7rem;
                min-width: 60px;
            }

            .improvement {
                font-size: 0.7rem;
                min-width: 80px;
            }

            .new-record-badge {
                font-size: 0.6rem;
                padding: 0.15rem 0.4rem;
            }
        }

        @media (max-width: 480px) {
            header {
                padding: 1.25rem 0.75rem 0.5rem;
            }

            .header-nav {
                gap: 1rem;
                margin-top: 0.75rem;
                padding-top: 0.75rem;
            }

            .header-nav a {
                font-size: 0.75rem;
            }

            .logo {
                font-size: 1.8rem;
                letter-spacing: 0.15em;
            }

            .logo::before {
                font-size: 0.7rem;
                letter-spacing: 0.3em;
            }

            .subtitle {
                font-size: 0.65rem;
                letter-spacing: 0.2em;
            }

            .date-display {
                font-size: 0.75rem;
            }

            main {
                padding: 1rem 0.75rem 2rem;
            }

            .intro-text {
                font-size: 0.95rem;
                line-height: 1.7;
            }

            .game-modes {
                gap: 0.75rem;
            }

            .mode-btn {
                padding: 0.9rem 1rem;
                font-size: 0.95rem;
            }

            .mode-btn .japanese {
                font-size: 0.75rem;
            }

            .quiz-header {
                margin-bottom: 1.5rem;
                padding-bottom: 0.75rem;
            }

            .progress-info {
                font-size: 0.8rem;
            }

            .timer {
                font-size: 1.3rem;
                min-width: 60px;
            }

            .question-type {
                font-size: 0.8rem;
            }

            .kanji-display {
                font-size: 5rem;
                margin: 1.5rem 0;
            }

            .kanji-display::after {
                height: 2px;
            }

            .word-display {
                font-size: 2.2rem;
                margin: 1rem 0;
            }

            .reading-hint {
                font-size: 0.9rem;
            }

            .options-grid {
                grid-template-columns: 1fr;
                gap: 0.75rem;
                margin-top: 1.5rem;
            }

            .option-btn {
                padding: 1rem 0.75rem;
                font-size: 0.9rem;
            }

            .feedback {
                padding: 1rem;
                margin-top: 1rem;
            }

            .feedback-icon {
                font-size: 1.5rem;
            }

            .feedback-text {
                font-size: 0.95rem;
            }

            .correct-answer {
                font-size: 0.95rem;
            }

            .results-title {
                font-size: 1.6rem;
            }

            .results-subtitle {
                font-size: 0.8rem;
            }

            .score-display {
                padding: 1.5rem;
                margin: 1.5rem 0;
            }

            .score-number {
                font-size: 3rem;
            }

            .score-label {
                font-size: 0.75rem;
            }

            .stats-grid {
                grid-template-columns: repeat(3, 1fr);
                gap: 0.4rem;
                margin: 1.5rem 0;
            }

            .stat-item {
                padding: 0.6rem 0.25rem;
            }

            .stat-value {
                font-size: 1.1rem;
            }

            .stat-label {
                font-size: 0.55rem;
            }

            .share-section {
                margin-top: 1.5rem;
                padding-top: 1.5rem;
            }

            .share-section > p {
                font-size: 0.9rem;
            }

            .share-grid {
                font-size: 0.85rem;
                line-height: 1.3;
                padding: 0.6rem;
            }

            .share-btn {
                width: 100%;
                margin: 0.5rem 0;
                padding: 0.9rem;
            }

            .leaderboard-title {
                font-size: 1rem;
            }

            .pb-item {
                padding: 0.5rem 0.6rem;
                gap: 0.25rem;
            }

            .pb-label {
                font-size: 0.8rem;
                flex: 1;
                min-width: 0;
            }

            .pb-value {
                font-size: 0.85rem;
                min-width: 45px;
            }

            .pb-date {
                font-size: 0.65rem;
                min-width: 45px;
                margin-left: 0.5rem;
            }

            .improvement {
                font-size: 0.6rem;
                min-width: 70px;
                margin-left: 0.25rem;
                text-align: right;
            }

            .new-record-badge {
                font-size: 0.55rem;
                padding: 0.1rem 0.3rem;
                margin-left: 0.3rem;
            }

            .play-again-btn {
                font-size: 0.85rem;
                padding: 0.7rem 1.5rem;
                margin-top: 1.5rem;
            }

            .comeback-time {
                font-size: 1.6rem;
            }

            .already-played {
                padding: 2rem 0.5rem;
            }

            /* Policy pages mobile */
            .policy-title {
                font-size: 1.5rem;
            }

            .policy-subtitle {
                font-size: 0.9rem;
            }

            .policy-content {
                padding: 1.25rem;
            }

            .policy-content h3 {
                font-size: 1.1rem;
            }

            .policy-content p,
            .policy-content li {
                font-size: 0.9rem;
            }

            .footer-links {
                gap: 1rem;
            }

            .footer-links a {
                font-size: 0.8rem;
            }
        }

        @media (max-width: 360px) {
            .logo {
                font-size: 1.5rem;
            }

            .kanji-display {
                font-size: 4rem;
            }

            .word-display {
                font-size: 1.8rem;
            }

            .score-number {
                font-size: 2.5rem;
            }

            .pb-item {
                flex-direction: row;
                flex-wrap: wrap;
            }

            .pb-label {
                width: 100%;
                margin-bottom: 0.25rem;
            }

            .pb-value, .pb-date, .improvement {
                min-width: auto;
            }
        }

        /* Touch-friendly improvements */
        @media (hover: none) and (pointer: coarse) {
            .option-btn {
                min-height: 54px;
            }

            .mode-btn {
                min-height: 60px;
            }

            .option-btn:active {
                transform: scale(0.98);
            }

            .mode-btn:active {
                transform: scale(0.98);
            }
        }

        /* Safe area for notched phones */
        @supports (padding: max(0px)) {
            body {
                padding-left: max(0px, env(safe-area-inset-left));
                padding-right: max(0px, env(safe-area-inset-right));
                padding-bottom: max(0px, env(safe-area-inset-bottom));
            }
        }
    </style>
</head>
<body>
    <header>
        <h1 class="logo">DAILY NIHONGO</h1>
        <p class="subtitle">Daily Kanji Challenge</p>
        <p class="date-display" id="dateDisplay"></p>
        <nav class="header-nav">
            <a href="#" onclick="showPage('game'); return false;">Play</a>
            <a href="#" onclick="showPage('about'); return false;">About</a>
            <a href="#" onclick="showPage('contact'); return false;">Contact</a>
            <a href="#" onclick="showPage('privacy'); return false;">Privacy</a>
        </nav>
    </header>

    <main>
        <!-- Start Screen -->
        <div class="screen active" id="startScreen">
            <div class="start-screen">
                <p class="intro-text">
                    Test your knowledge of Japanese kanji and vocabulary.<br>
                    Complete today's challenge and compete with players worldwide.
                </p>
                
                <div class="seal">
                    <span class="seal-text">今</span>
                </div>

                <div class="game-modes">
                    <button class="mode-btn" onclick="startGame('kanji')">
                        Kanji Meaning
                        <span class="japanese">漢字の意味</span>
                    </button>
                    <button class="mode-btn" onclick="startGame('reading')">
                        Kanji Reading
                        <span class="japanese">漢字の読み方</span>
                    </button>
                    <button class="mode-btn" onclick="startGame('word')">
                        Vocabulary
                        <span class="japanese">語彙</span>
                    </button>
                    <button class="mode-btn" onclick="startGame('mixed')">
                        Mixed Challenge
                        <span class="japanese">総合問題</span>
                    </button>
                </div>
            </div>
        </div>

        <!-- Quiz Screen -->
        <div class="screen" id="quizScreen">
            <div class="quiz-header">
                <div class="progress-info">
                    <span id="questionNum">1</span> / <span id="totalQuestions">10</span>
                </div>
                <div class="timer" id="timer">0:00</div>
            </div>

            <div class="question-container" id="questionContainer">
                <!-- Question content injected here -->
            </div>

            <div id="answerArea">
                <!-- Answer options injected here -->
            </div>

            <div id="feedbackArea" style="display: none;">
                <!-- Feedback injected here -->
            </div>
        </div>

        <!-- Results Screen -->
        <div class="screen" id="resultsScreen">
            <div class="results-screen">
                <h2 class="results-title">Today's Results</h2>
                <p class="results-subtitle" id="resultsDate"></p>

                <div class="score-display">
                    <div class="score-number" id="finalScore">0</div>
                    <div class="score-label">Points</div>
                </div>

                <div class="stats-grid">
                    <div class="stat-item">
                        <div class="stat-value" id="correctCount">0</div>
                        <div class="stat-label">Correct</div>
                    </div>
                    <div class="stat-item">
                        <div class="stat-value" id="totalTime">0:00</div>
                        <div class="stat-label">Time</div>
                    </div>
                    <div class="stat-item">
                        <div class="stat-value" id="streakCount">0</div>
                        <div class="stat-label">Streak</div>
                    </div>
                </div>

                <div class="share-section">
                    <p>Share your results:</p>
                    <div class="share-grid" id="shareGrid"></div>
                    <button class="share-btn" id="copyBtn" onclick="copyResults()">Copy Results</button>
                </div>

                <div class="personal-bests">
                    <h3 class="leaderboard-title">Your Personal Bests</h3>
                    <div class="leaderboard-list" id="personalBests">
                        <!-- Personal bests injected here -->
                    </div>
                </div>

                <button class="play-again-btn" onclick="location.reload()">Play Another Mode</button>
            </div>
        </div>

        <!-- Already Played Screen -->
        <div class="screen" id="alreadyPlayedScreen">
            <div class="already-played">
                <div class="seal">
                    <span class="seal-text">完</span>
                </div>
                <h2 class="results-title">You've completed today's challenge!</h2>
                <p class="results-subtitle">Come back tomorrow for a new set of questions.</p>
                <div class="comeback-time" id="comebackTime">--:--:--</div>
                <p style="color: var(--moss); font-size: 0.9rem;">until the next challenge</p>
                
                <div id="previousResults" style="margin-top: 2rem;">
                    <!-- Previous results shown here -->
                </div>
            </div>
        </div>

        <!-- About Page -->
        <div class="screen" id="aboutPage">
            <div class="policy-page">
                <h2 class="policy-title">About Daily Nihongo</h2>
                <p class="policy-subtitle">漢字道について</p>

                <div class="policy-content">
                    <h3>Our Mission</h3>
                    <p>Daily Nihongo is a free daily Japanese language learning game designed to help students and enthusiasts improve their kanji recognition and vocabulary skills through engaging, bite-sized challenges.</p>

                    <h3>How It Works</h3>
                    <p>Every day, Daily Nihongo presents a fresh set of 10 questions across four different game modes:</p>
                    <ul>
                        <li><strong>Kanji Meaning</strong> — Match kanji characters to their English meanings</li>
                        <li><strong>Kanji Reading</strong> — Identify the correct hiragana reading for each kanji</li>
                        <li><strong>Vocabulary</strong> — Learn common Japanese words and their definitions</li>
                        <li><strong>Mixed Challenge</strong> — A combination of all question types for comprehensive practice</li>
                    </ul>

                    <h3>Daily Challenge Format</h3>
                    <p>Like popular daily word games, Daily Nihongo resets at midnight each day with new questions. Everyone around the world receives the same questions on any given day, making it easy to compare your results with friends and fellow learners. Your score is based on accuracy, speed, and answer streaks.</p>

                    <h3>Track Your Progress</h3>
                    <p>Daily Nihongo automatically saves your personal bests for each game mode, including your highest score, fastest completion time, and best accuracy percentage. Build your daily streak by playing consistently!</p>

                    <h3>JLPT Levels</h3>
                    <p>Our kanji and vocabulary database primarily covers JLPT N5 and N4 level content, making it perfect for beginners and intermediate learners. We regularly update our question bank to provide fresh learning opportunities.</p>

                    <h3>Free to Play</h3>
                    <p>Daily Nihongo is completely free to use. We display advertisements to support the ongoing development and maintenance of the game. Thank you for your understanding and support!</p>
                </div>

                <button class="play-again-btn" onclick="showPage('game')">← Back to Game</button>
            </div>
        </div>

        <!-- Contact Page -->
        <div class="screen" id="contactPage">
            <div class="policy-page">
                <h2 class="policy-title">Contact Us</h2>
                <p class="policy-subtitle">お問い合わせ</p>

                <div class="policy-content">
                    <h3>Get in Touch</h3>
                    <p>We'd love to hear from you! Whether you have questions, feedback, bug reports, or suggestions for improving Daily Nihongo, please don't hesitate to reach out.</p>

                    <div class="contact-form">
                        <div class="form-group">
                            <label for="contactName">Your Name</label>
                            <input type="text" id="contactName" placeholder="Enter your name">
                        </div>
                        <div class="form-group">
                            <label for="contactEmail">Email Address</label>
                            <input type="email" id="contactEmail" placeholder="Enter your email">
                        </div>
                        <div class="form-group">
                            <label for="contactSubject">Subject</label>
                            <select id="contactSubject">
                                <option value="">Select a topic...</option>
                                <option value="feedback">General Feedback</option>
                                <option value="bug">Bug Report</option>
                                <option value="suggestion">Feature Suggestion</option>
                                <option value="content">Content Error</option>
                                <option value="other">Other</option>
                            </select>
                        </div>
                        <div class="form-group">
                            <label for="contactMessage">Message</label>
                            <textarea id="contactMessage" rows="5" placeholder="Write your message here..."></textarea>
                        </div>
                        <button class="submit-btn" onclick="submitContact()">Send Message</button>
                    </div>

                    <div id="contactSuccess" class="contact-success" style="display: none;">
                        <div class="feedback-icon">✓</div>
                        <p>Thank you for your message! We'll get back to you as soon as possible.</p>
                    </div>

                    <h3>Other Ways to Reach Us</h3>
                    <p><strong>Email:</strong> cocoacodeco@gmail.com</p>
                    <p><strong>Response Time:</strong> We typically respond within 24-48 hours.</p>
                </div>

                <button class="play-again-btn" onclick="showPage('game')">← Back to Game</button>
            </div>
        </div>

        <!-- Privacy Policy Page -->
        <div class="screen" id="privacyPage">
            <div class="policy-page">
                <h2 class="policy-title">Privacy Policy</h2>
                <p class="policy-subtitle">プライバシーポリシー</p>
                <p class="policy-date">Last Updated: November 2025</p>

                <div class="policy-content">
                    <h3>Introduction</h3>
                    <p>Welcome to Daily Nihongo ("we," "our," or "us"). We are committed to protecting your privacy and ensuring transparency about how we collect, use, and safeguard your information. This Privacy Policy explains our practices regarding data collection when you use our website.</p>

                    <h3>Information We Collect</h3>
                    
                    <h4>Information Stored Locally</h4>
                    <p>Daily Nihongo stores the following information locally on your device using browser localStorage:</p>
                    <ul>
                        <li>Game progress and completion status</li>
                        <li>Personal best scores, times, and accuracy for each game mode</li>
                        <li>Daily streak count</li>
                        <li>Date of last gameplay</li>
                    </ul>
                    <p>This information never leaves your device and is not transmitted to our servers.</p>

                    <h4>Information Collected Automatically</h4>
                    <p>When you visit our website, we may automatically collect certain information, including:</p>
                    <ul>
                        <li>IP address</li>
                        <li>Browser type and version</li>
                        <li>Operating system</li>
                        <li>Pages visited and time spent on pages</li>
                        <li>Referring website</li>
                        <li>Device type (desktop, mobile, tablet)</li>
                    </ul>

                    <h3>How We Use Your Information</h3>
                    <p>We use the collected information to:</p>
                    <ul>
                        <li>Provide and maintain our service</li>
                        <li>Improve and optimize our website</li>
                        <li>Analyze usage patterns and trends</li>
                        <li>Display relevant advertisements</li>
                        <li>Detect and prevent technical issues</li>
                    </ul>

                    <h3>Advertising</h3>
                    <p>We use Google AdSense to display advertisements on our website. Google AdSense uses cookies and similar technologies to serve ads based on your prior visits to our website and other websites. Google's use of advertising cookies enables it and its partners to serve ads based on your visit to our site and/or other sites on the Internet.</p>
                    <p>You may opt out of personalized advertising by visiting <a href="https://www.google.com/settings/ads" target="_blank" rel="noopener">Google Ads Settings</a>. Alternatively, you can opt out of third-party vendor cookies by visiting the <a href="https://optout.networkadvertising.org/" target="_blank" rel="noopener">Network Advertising Initiative opt-out page</a>.</p>

                    <h3>Cookies</h3>
                    <p>Cookies are small text files stored on your device. We use cookies for:</p>
                    <ul>
                        <li><strong>Essential cookies:</strong> Required for basic website functionality</li>
                        <li><strong>Analytics cookies:</strong> Help us understand how visitors use our site</li>
                        <li><strong>Advertising cookies:</strong> Used to deliver relevant advertisements</li>
                    </ul>
                    <p>You can control cookie settings through your browser preferences. Note that disabling cookies may affect website functionality.</p>

                    <h3>Third-Party Services</h3>
                    <p>We may use third-party services that collect, monitor, and analyze data:</p>
                    <ul>
                        <li><strong>Google AdSense:</strong> For displaying advertisements</li>
                        <li><strong>Google Analytics:</strong> For website analytics and performance monitoring</li>
                    </ul>
                    <p>These services have their own privacy policies governing the use of your information.</p>

                    <h3>Data Security</h3>
                    <p>We implement appropriate technical and organizational measures to protect your information. However, no method of transmission over the Internet is 100% secure, and we cannot guarantee absolute security.</p>

                    <h3>Children's Privacy</h3>
                    <p>Our service is not directed to children under 13. We do not knowingly collect personal information from children under 13. If you are a parent or guardian and believe your child has provided us with personal information, please contact us.</p>

                    <h3>Your Rights</h3>
                    <p>Depending on your location, you may have the right to:</p>
                    <ul>
                        <li>Access the personal information we hold about you</li>
                        <li>Request correction of inaccurate information</li>
                        <li>Request deletion of your information</li>
                        <li>Opt out of certain data processing activities</li>
                        <li>Withdraw consent where processing is based on consent</li>
                    </ul>

                    <h3>Changes to This Policy</h3>
                    <p>We may update this Privacy Policy from time to time. We will notify you of any changes by posting the new Privacy Policy on this page and updating the "Last Updated" date.</p>

                    <h3>Contact Us</h3>
                    <p>If you have any questions about this Privacy Policy, please contact us at:</p>
                    <p><strong>Email:</strong> cocoacodeco@gmail.com</p>
                </div>

                <button class="play-again-btn" onclick="showPage('game')">← Back to Game</button>
            </div>
        </div>

        <!-- Terms of Service Page -->
        <div class="screen" id="termsPage">
            <div class="policy-page">
                <h2 class="policy-title">Terms of Service</h2>
                <p class="policy-subtitle">利用規約</p>
                <p class="policy-date">Last Updated: November 2025</p>

                <div class="policy-content">
                    <h3>1. Acceptance of Terms</h3>
                    <p>By accessing and using Daily Nihongo ("the Service"), you accept and agree to be bound by these Terms of Service. If you do not agree to these terms, please do not use our Service.</p>

                    <h3>2. Description of Service</h3>
                    <p>Daily Nihongo is a free online Japanese language learning game that provides daily kanji and vocabulary quizzes. The Service is provided "as is" and is intended for educational and entertainment purposes.</p>

                    <h3>3. User Conduct</h3>
                    <p>You agree not to:</p>
                    <ul>
                        <li>Use the Service for any unlawful purpose</li>
                        <li>Attempt to gain unauthorized access to any part of the Service</li>
                        <li>Interfere with or disrupt the Service or servers</li>
                        <li>Use automated systems or software to extract data from the Service</li>
                        <li>Reproduce, duplicate, or copy any part of the Service without permission</li>
                    </ul>

                    <h3>4. Intellectual Property</h3>
                    <p>All content on Daily Nihongo, including but not limited to text, graphics, logos, and software, is the property of Daily Nihongo or its content suppliers and is protected by intellectual property laws. You may not use, reproduce, or distribute any content without our prior written permission.</p>

                    <h3>5. Disclaimer of Warranties</h3>
                    <p>The Service is provided on an "AS IS" and "AS AVAILABLE" basis. We make no warranties, expressed or implied, regarding the reliability, accuracy, or availability of the Service. We do not guarantee that the Service will be uninterrupted, error-free, or free of viruses.</p>

                    <h3>6. Limitation of Liability</h3>
                    <p>To the fullest extent permitted by law, Daily Nihongo shall not be liable for any indirect, incidental, special, consequential, or punitive damages arising from your use of the Service.</p>

                    <h3>7. Educational Content Disclaimer</h3>
                    <p>While we strive for accuracy, the kanji and vocabulary content provided is for educational purposes only. We recommend verifying information with official Japanese language resources and textbooks.</p>

                    <h3>8. Advertisements</h3>
                    <p>The Service may display third-party advertisements. We are not responsible for the content of these advertisements or any products or services offered by advertisers.</p>

                    <h3>9. Modifications to Service</h3>
                    <p>We reserve the right to modify, suspend, or discontinue the Service at any time without notice. We shall not be liable to you or any third party for any modification, suspension, or discontinuation.</p>

                    <h3>10. Changes to Terms</h3>
                    <p>We may revise these Terms of Service at any time. By continuing to use the Service after changes are posted, you accept the revised terms.</p>

                    <h3>11. Governing Law</h3>
                    <p>These Terms shall be governed by and construed in accordance with applicable laws, without regard to conflict of law principles.</p>

                    <h3>12. Contact Information</h3>
                    <p>For questions about these Terms of Service, please contact us at:</p>
                    <p><strong>Email:</strong> cocoacodeco@gmail.com</p>
                </div>

                <button class="play-again-btn" onclick="showPage('game')">← Back to Game</button>
            </div>
        </div>
    </main>

    <!-- Footer -->
    <footer>
        <div class="footer-content">
            <div class="footer-links">
                <a href="#" onclick="showPage('about'); return false;">About</a>
                <a href="#" onclick="showPage('contact'); return false;">Contact</a>
                <a href="#" onclick="showPage('privacy'); return false;">Privacy Policy</a>
                <a href="#" onclick="showPage('terms'); return false;">Terms of Service</a>
            </div>
            <p class="footer-copy">© 2025 Daily Nihongo. All rights reserved.</p>
            <p class="footer-disclaimer">Daily Nihongo is an independent educational project and is not affiliated with the JLPT or any official Japanese language certification body.</p>
        </div>
    </footer>

    <script>
        // ==================== DATA ====================
        const kanjiData = [
       // Numbers
       { kanji: '一', meaning: 'one', onyomi: 'イチ', kunyomi: 'ひと', jlpt: 5 },
            { kanji: '二', meaning: 'two', onyomi: 'ニ', kunyomi: 'ふた', jlpt: 5 },
            { kanji: '三', meaning: 'three', onyomi: 'サン', kunyomi: 'み', jlpt: 5 },
            { kanji: '四', meaning: 'four', onyomi: 'シ', kunyomi: 'よ, よん', jlpt: 5 },
            { kanji: '五', meaning: 'five', onyomi: 'ゴ', kunyomi: 'いつ', jlpt: 5 },
            { kanji: '六', meaning: 'six', onyomi: 'ロク', kunyomi: 'む', jlpt: 5 },
            { kanji: '七', meaning: 'seven', onyomi: 'シチ', kunyomi: 'なな', jlpt: 5 },
            { kanji: '八', meaning: 'eight', onyomi: 'ハチ', kunyomi: 'や', jlpt: 5 },
            { kanji: '九', meaning: 'nine', onyomi: 'キュウ, ク', kunyomi: 'ここの', jlpt: 5 },
            { kanji: '十', meaning: 'ten', onyomi: 'ジュウ', kunyomi: 'とお', jlpt: 5 },
            { kanji: '百', meaning: 'hundred', onyomi: 'ヒャク', kunyomi: '', jlpt: 5 },
            { kanji: '千', meaning: 'thousand', onyomi: 'セン', kunyomi: 'ち', jlpt: 5 },
            { kanji: '万', meaning: 'ten thousand', onyomi: 'マン, バン', kunyomi: '', jlpt: 5 },
            
            // Time - N5
            { kanji: '日', meaning: 'sun, day', onyomi: 'ニチ, ジツ', kunyomi: 'ひ, か', jlpt: 5 },
            { kanji: '月', meaning: 'moon, month', onyomi: 'ゲツ, ガツ', kunyomi: 'つき', jlpt: 5 },
            { kanji: '火', meaning: 'fire', onyomi: 'カ', kunyomi: 'ひ', jlpt: 5 },
            { kanji: '水', meaning: 'water', onyomi: 'スイ', kunyomi: 'みず', jlpt: 5 },
            { kanji: '木', meaning: 'tree, wood', onyomi: 'モク, ボク', kunyomi: 'き', jlpt: 5 },
            { kanji: '金', meaning: 'gold, money', onyomi: 'キン, コン', kunyomi: 'かね', jlpt: 5 },
            { kanji: '土', meaning: 'earth, soil', onyomi: 'ド, ト', kunyomi: 'つち', jlpt: 5 },
            { kanji: '年', meaning: 'year', onyomi: 'ネン', kunyomi: 'とし', jlpt: 5 },
            { kanji: '時', meaning: 'time, hour', onyomi: 'ジ', kunyomi: 'とき', jlpt: 5 },
            { kanji: '分', meaning: 'minute, part', onyomi: 'ブン, フン', kunyomi: 'わ', jlpt: 5 },
            { kanji: '半', meaning: 'half', onyomi: 'ハン', kunyomi: 'なか', jlpt: 5 },
            { kanji: '今', meaning: 'now', onyomi: 'コン, キン', kunyomi: 'いま', jlpt: 5 },
            { kanji: '午', meaning: 'noon', onyomi: 'ゴ', kunyomi: '', jlpt: 5 },
            { kanji: '前', meaning: 'front, before', onyomi: 'ゼン', kunyomi: 'まえ', jlpt: 5 },
            { kanji: '後', meaning: 'behind, after', onyomi: 'ゴ, コウ', kunyomi: 'うし, あと', jlpt: 5 },
            { kanji: '週', meaning: 'week', onyomi: 'シュウ', kunyomi: '', jlpt: 5 },
            { kanji: '毎', meaning: 'every', onyomi: 'マイ', kunyomi: '', jlpt: 5 },
            { kanji: '間', meaning: 'interval, between', onyomi: 'カン, ケン', kunyomi: 'あいだ, ま', jlpt: 5 },
            
            // People - N5
            { kanji: '人', meaning: 'person', onyomi: 'ジン, ニン', kunyomi: 'ひと', jlpt: 5 },
            { kanji: '男', meaning: 'man, male', onyomi: 'ダン, ナン', kunyomi: 'おとこ', jlpt: 5 },
            { kanji: '女', meaning: 'woman, female', onyomi: 'ジョ, ニョ', kunyomi: 'おんな', jlpt: 5 },
            { kanji: '子', meaning: 'child', onyomi: 'シ, ス', kunyomi: 'こ', jlpt: 5 },
            { kanji: '父', meaning: 'father', onyomi: 'フ', kunyomi: 'ちち', jlpt: 5 },
            { kanji: '母', meaning: 'mother', onyomi: 'ボ', kunyomi: 'はは', jlpt: 5 },
            { kanji: '友', meaning: 'friend', onyomi: 'ユウ', kunyomi: 'とも', jlpt: 5 },
            { kanji: '先', meaning: 'previous, ahead', onyomi: 'セン', kunyomi: 'さき', jlpt: 5 },
            { kanji: '生', meaning: 'life, birth', onyomi: 'セイ, ショウ', kunyomi: 'い, う, は', jlpt: 5 },
            { kanji: '学', meaning: 'study, learn', onyomi: 'ガク', kunyomi: 'まな', jlpt: 5 },
            { kanji: '名', meaning: 'name', onyomi: 'メイ, ミョウ', kunyomi: 'な', jlpt: 5 },
            
            // Body - N5
            { kanji: '口', meaning: 'mouth', onyomi: 'コウ, ク', kunyomi: 'くち', jlpt: 5 },
            { kanji: '目', meaning: 'eye', onyomi: 'モク, ボク', kunyomi: 'め', jlpt: 5 },
            { kanji: '耳', meaning: 'ear', onyomi: 'ジ', kunyomi: 'みみ', jlpt: 5 },
            { kanji: '手', meaning: 'hand', onyomi: 'シュ', kunyomi: 'て', jlpt: 5 },
            { kanji: '足', meaning: 'foot, leg', onyomi: 'ソク', kunyomi: 'あし', jlpt: 5 },
            
            // Nature - N5
            { kanji: '山', meaning: 'mountain', onyomi: 'サン', kunyomi: 'やま', jlpt: 5 },
            { kanji: '川', meaning: 'river', onyomi: 'セン', kunyomi: 'かわ', jlpt: 5 },
            { kanji: '田', meaning: 'rice field', onyomi: 'デン', kunyomi: 'た', jlpt: 5 },
            { kanji: '天', meaning: 'heaven, sky', onyomi: 'テン', kunyomi: 'あめ, あま', jlpt: 5 },
            { kanji: '気', meaning: 'spirit, air', onyomi: 'キ, ケ', kunyomi: '', jlpt: 5 },
            { kanji: '雨', meaning: 'rain', onyomi: 'ウ', kunyomi: 'あめ, あま', jlpt: 5 },
            { kanji: '空', meaning: 'sky, empty', onyomi: 'クウ', kunyomi: 'そら, から, あ', jlpt: 5 },
            { kanji: '花', meaning: 'flower', onyomi: 'カ', kunyomi: 'はな', jlpt: 5 },
            
            // Colors - N5
            { kanji: '白', meaning: 'white', onyomi: 'ハク, ビャク', kunyomi: 'しろ', jlpt: 5 },
            
            // Position/Direction - N5
            { kanji: '大', meaning: 'big, large', onyomi: 'ダイ, タイ', kunyomi: 'おお', jlpt: 5 },
            { kanji: '小', meaning: 'small, little', onyomi: 'ショウ', kunyomi: 'ちい, こ, お', jlpt: 5 },
            { kanji: '上', meaning: 'up, above', onyomi: 'ジョウ', kunyomi: 'うえ, あ', jlpt: 5 },
            { kanji: '下', meaning: 'down, below', onyomi: 'カ, ゲ', kunyomi: 'した, さ, くだ', jlpt: 5 },
            { kanji: '中', meaning: 'middle, inside', onyomi: 'チュウ', kunyomi: 'なか', jlpt: 5 },
            { kanji: '左', meaning: 'left', onyomi: 'サ', kunyomi: 'ひだり', jlpt: 5 },
            { kanji: '右', meaning: 'right', onyomi: 'ウ, ユウ', kunyomi: 'みぎ', jlpt: 5 },
            { kanji: '外', meaning: 'outside', onyomi: 'ガイ, ゲ', kunyomi: 'そと, ほか', jlpt: 5 },
            { kanji: '北', meaning: 'north', onyomi: 'ホク', kunyomi: 'きた', jlpt: 5 },
            { kanji: '南', meaning: 'south', onyomi: 'ナン', kunyomi: 'みなみ', jlpt: 5 },
            { kanji: '東', meaning: 'east', onyomi: 'トウ', kunyomi: 'ひがし', jlpt: 5 },
            { kanji: '西', meaning: 'west', onyomi: 'セイ, サイ', kunyomi: 'にし', jlpt: 5 },
            
            // Places - N5
            { kanji: '国', meaning: 'country', onyomi: 'コク', kunyomi: 'くに', jlpt: 5 },
            { kanji: '校', meaning: 'school', onyomi: 'コウ', kunyomi: '', jlpt: 5 },
            { kanji: '店', meaning: 'shop, store', onyomi: 'テン', kunyomi: 'みせ', jlpt: 5 },
            { kanji: '駅', meaning: 'station', onyomi: 'エキ', kunyomi: '', jlpt: 5 },
            { kanji: '道', meaning: 'road, way', onyomi: 'ドウ', kunyomi: 'みち', jlpt: 5 },
            { kanji: '会', meaning: 'meet, society', onyomi: 'カイ, エ', kunyomi: 'あ', jlpt: 5 },
            { kanji: '社', meaning: 'company, shrine', onyomi: 'シャ', kunyomi: 'やしろ', jlpt: 5 },
            
            // Objects - N5
            { kanji: '本', meaning: 'book, origin', onyomi: 'ホン', kunyomi: 'もと', jlpt: 5 },
            { kanji: '円', meaning: 'yen, circle', onyomi: 'エン', kunyomi: 'まる', jlpt: 5 },
            { kanji: '車', meaning: 'car, vehicle', onyomi: 'シャ', kunyomi: 'くるま', jlpt: 5 },
            { kanji: '電', meaning: 'electricity', onyomi: 'デン', kunyomi: '', jlpt: 5 },
            
            // Actions - N5
            { kanji: '語', meaning: 'language, word', onyomi: 'ゴ', kunyomi: 'かた', jlpt: 5 },
            { kanji: '読', meaning: 'read', onyomi: 'ドク, トク', kunyomi: 'よ', jlpt: 5 },
            { kanji: '書', meaning: 'write', onyomi: 'ショ', kunyomi: 'か', jlpt: 5 },
            { kanji: '見', meaning: 'see, look', onyomi: 'ケン', kunyomi: 'み', jlpt: 5 },
            { kanji: '聞', meaning: 'hear, ask', onyomi: 'ブン, モン', kunyomi: 'き', jlpt: 5 },
            { kanji: '話', meaning: 'speak, talk', onyomi: 'ワ', kunyomi: 'はな, はなし', jlpt: 5 },
            { kanji: '食', meaning: 'eat, food', onyomi: 'ショク', kunyomi: 'た, く', jlpt: 5 },
            { kanji: '飲', meaning: 'drink', onyomi: 'イン', kunyomi: 'の', jlpt: 5 },
            { kanji: '行', meaning: 'go', onyomi: 'コウ, ギョウ', kunyomi: 'い, ゆ', jlpt: 5 },
            { kanji: '来', meaning: 'come', onyomi: 'ライ', kunyomi: 'く, き', jlpt: 5 },
            { kanji: '出', meaning: 'exit, leave', onyomi: 'シュツ', kunyomi: 'で, だ', jlpt: 5 },
            { kanji: '入', meaning: 'enter', onyomi: 'ニュウ', kunyomi: 'い, はい', jlpt: 5 },
            { kanji: '休', meaning: 'rest', onyomi: 'キュウ', kunyomi: 'やす', jlpt: 5 },
            { kanji: '買', meaning: 'buy', onyomi: 'バイ', kunyomi: 'か', jlpt: 5 },
            { kanji: '立', meaning: 'stand', onyomi: 'リツ', kunyomi: 'た', jlpt: 5 },
            { kanji: '何', meaning: 'what', onyomi: 'カ', kunyomi: 'なに, なん', jlpt: 5 },
            
            // Adjectives - N5
            { kanji: '新', meaning: 'new', onyomi: 'シン', kunyomi: 'あたら, あら, にい', jlpt: 5 },
            { kanji: '古', meaning: 'old', onyomi: 'コ', kunyomi: 'ふる', jlpt: 5 },
            { kanji: '高', meaning: 'tall, expensive', onyomi: 'コウ', kunyomi: 'たか', jlpt: 5 },
            { kanji: '安', meaning: 'cheap, peaceful', onyomi: 'アン', kunyomi: 'やす', jlpt: 5 },
            { kanji: '長', meaning: 'long, leader', onyomi: 'チョウ', kunyomi: 'なが', jlpt: 5 },
            { kanji: '多', meaning: 'many, much', onyomi: 'タ', kunyomi: 'おお', jlpt: 5 },
            { kanji: '少', meaning: 'few, little', onyomi: 'ショウ', kunyomi: 'すく, すこ', jlpt: 5 },
            
            // ==================== JLPT N4 KANJI (181 kanji) ====================
            // People & Family - N4
            { kanji: '兄', meaning: 'older brother', onyomi: 'ケイ, キョウ', kunyomi: 'あに', jlpt: 4 },
            { kanji: '弟', meaning: 'younger brother', onyomi: 'テイ, ダイ', kunyomi: 'おとうと', jlpt: 4 },
            { kanji: '姉', meaning: 'older sister', onyomi: 'シ', kunyomi: 'あね', jlpt: 4 },
            { kanji: '妹', meaning: 'younger sister', onyomi: 'マイ', kunyomi: 'いもうと', jlpt: 4 },
            { kanji: '夫', meaning: 'husband', onyomi: 'フ, フウ', kunyomi: 'おっと', jlpt: 4 },
            { kanji: '妻', meaning: 'wife', onyomi: 'サイ', kunyomi: 'つま', jlpt: 4 },
            { kanji: '親', meaning: 'parent', onyomi: 'シン', kunyomi: 'おや, した', jlpt: 4 },
            { kanji: '族', meaning: 'tribe, family', onyomi: 'ゾク', kunyomi: '', jlpt: 4 },
            { kanji: '主', meaning: 'master, main', onyomi: 'シュ, ス', kunyomi: 'ぬし, おも', jlpt: 4 },
            { kanji: '彼', meaning: 'he, that', onyomi: 'ヒ', kunyomi: 'かれ, かの', jlpt: 4 },
            { kanji: '私', meaning: 'I, private', onyomi: 'シ', kunyomi: 'わたし, わたくし', jlpt: 4 },
            { kanji: '自', meaning: 'self', onyomi: 'ジ, シ', kunyomi: 'みずか', jlpt: 4 },
            { kanji: '者', meaning: 'person', onyomi: 'シャ', kunyomi: 'もの', jlpt: 4 },
            
            // Body - N4
            { kanji: '体', meaning: 'body', onyomi: 'タイ, テイ', kunyomi: 'からだ', jlpt: 4 },
            { kanji: '頭', meaning: 'head', onyomi: 'トウ, ズ', kunyomi: 'あたま, かしら', jlpt: 4 },
            { kanji: '顔', meaning: 'face', onyomi: 'ガン', kunyomi: 'かお', jlpt: 4 },
            { kanji: '首', meaning: 'neck', onyomi: 'シュ', kunyomi: 'くび', jlpt: 4 },
            { kanji: '声', meaning: 'voice', onyomi: 'セイ, ショウ', kunyomi: 'こえ', jlpt: 4 },
            { kanji: '心', meaning: 'heart, mind', onyomi: 'シン', kunyomi: 'こころ', jlpt: 4 },
            
            // Nature & Weather - N4
            { kanji: '海', meaning: 'sea, ocean', onyomi: 'カイ', kunyomi: 'うみ', jlpt: 4 },
            { kanji: '池', meaning: 'pond', onyomi: 'チ', kunyomi: 'いけ', jlpt: 4 },
            { kanji: '地', meaning: 'ground, earth', onyomi: 'チ, ジ', kunyomi: '', jlpt: 4 },
            { kanji: '林', meaning: 'forest, grove', onyomi: 'リン', kunyomi: 'はやし', jlpt: 4 },
            { kanji: '森', meaning: 'forest', onyomi: 'シン', kunyomi: 'もり', jlpt: 4 },
            { kanji: '野', meaning: 'field, wild', onyomi: 'ヤ', kunyomi: 'の', jlpt: 4 },
            { kanji: '風', meaning: 'wind', onyomi: 'フウ, フ', kunyomi: 'かぜ, かざ', jlpt: 4 },
            { kanji: '雪', meaning: 'snow', onyomi: 'セツ', kunyomi: 'ゆき', jlpt: 4 },
            { kanji: '雲', meaning: 'cloud', onyomi: 'ウン', kunyomi: 'くも', jlpt: 4 },
            { kanji: '光', meaning: 'light', onyomi: 'コウ', kunyomi: 'ひか, ひかり', jlpt: 4 },
            { kanji: '春', meaning: 'spring', onyomi: 'シュン', kunyomi: 'はる', jlpt: 4 },
            { kanji: '夏', meaning: 'summer', onyomi: 'カ, ゲ', kunyomi: 'なつ', jlpt: 4 },
            { kanji: '秋', meaning: 'autumn', onyomi: 'シュウ', kunyomi: 'あき', jlpt: 4 },
            { kanji: '冬', meaning: 'winter', onyomi: 'トウ', kunyomi: 'ふゆ', jlpt: 4 },
            { kanji: '朝', meaning: 'morning', onyomi: 'チョウ', kunyomi: 'あさ', jlpt: 4 },
            { kanji: '昼', meaning: 'noon, daytime', onyomi: 'チュウ', kunyomi: 'ひる', jlpt: 4 },
            { kanji: '夜', meaning: 'night', onyomi: 'ヤ', kunyomi: 'よる, よ', jlpt: 4 },
            { kanji: '夕', meaning: 'evening', onyomi: 'セキ', kunyomi: 'ゆう', jlpt: 4 },
            
            // Colors - N4
            { kanji: '黒', meaning: 'black', onyomi: 'コク', kunyomi: 'くろ', jlpt: 4 },
            { kanji: '赤', meaning: 'red', onyomi: 'セキ', kunyomi: 'あか', jlpt: 4 },
            { kanji: '青', meaning: 'blue, green', onyomi: 'セイ', kunyomi: 'あお', jlpt: 4 },
            { kanji: '色', meaning: 'color', onyomi: 'ショク, シキ', kunyomi: 'いろ', jlpt: 4 },
            
            // Places & Buildings - N4
            { kanji: '室', meaning: 'room', onyomi: 'シツ', kunyomi: 'むろ', jlpt: 4 },
            { kanji: '屋', meaning: 'roof, shop', onyomi: 'オク', kunyomi: 'や', jlpt: 4 },
            { kanji: '家', meaning: 'house, home', onyomi: 'カ, ケ', kunyomi: 'いえ, や', jlpt: 4 },
            { kanji: '堂', meaning: 'hall', onyomi: 'ドウ', kunyomi: '', jlpt: 4 },
            { kanji: '院', meaning: 'institution', onyomi: 'イン', kunyomi: '', jlpt: 4 },
            { kanji: '館', meaning: 'building, hall', onyomi: 'カン', kunyomi: 'やかた', jlpt: 4 },
            { kanji: '場', meaning: 'place', onyomi: 'ジョウ', kunyomi: 'ば', jlpt: 4 },
            { kanji: '町', meaning: 'town', onyomi: 'チョウ', kunyomi: 'まち', jlpt: 4 },
            { kanji: '村', meaning: 'village', onyomi: 'ソン', kunyomi: 'むら', jlpt: 4 },
            { kanji: '市', meaning: 'city, market', onyomi: 'シ', kunyomi: 'いち', jlpt: 4 },
            { kanji: '区', meaning: 'ward, district', onyomi: 'ク', kunyomi: '', jlpt: 4 },
            { kanji: '京', meaning: 'capital', onyomi: 'キョウ, ケイ', kunyomi: '', jlpt: 4 },
            { kanji: '都', meaning: 'capital, metropolis', onyomi: 'ト, ツ', kunyomi: 'みやこ', jlpt: 4 },
            { kanji: '県', meaning: 'prefecture', onyomi: 'ケン', kunyomi: '', jlpt: 4 },
            { kanji: '界', meaning: 'world', onyomi: 'カイ', kunyomi: '', jlpt: 4 },
            { kanji: '世', meaning: 'world, generation', onyomi: 'セイ, セ', kunyomi: 'よ', jlpt: 4 },
            { kanji: '洋', meaning: 'ocean, Western', onyomi: 'ヨウ', kunyomi: '', jlpt: 4 },
            { kanji: '門', meaning: 'gate', onyomi: 'モン', kunyomi: 'かど', jlpt: 4 },
            { kanji: '戸', meaning: 'door', onyomi: 'コ', kunyomi: 'と', jlpt: 4 },
            { kanji: '台', meaning: 'stand, counter', onyomi: 'ダイ, タイ', kunyomi: '', jlpt: 4 },
            { kanji: '広', meaning: 'wide', onyomi: 'コウ', kunyomi: 'ひろ', jlpt: 4 },
            
            // Objects & Animals - N4
            { kanji: '紙', meaning: 'paper', onyomi: 'シ', kunyomi: 'かみ', jlpt: 4 },
            { kanji: '茶', meaning: 'tea', onyomi: 'チャ, サ', kunyomi: '', jlpt: 4 },
            { kanji: '肉', meaning: 'meat', onyomi: 'ニク', kunyomi: '', jlpt: 4 },
            { kanji: '魚', meaning: 'fish', onyomi: 'ギョ', kunyomi: 'さかな, うお', jlpt: 4 },
            { kanji: '鳥', meaning: 'bird', onyomi: 'チョウ', kunyomi: 'とり', jlpt: 4 },
            { kanji: '牛', meaning: 'cow', onyomi: 'ギュウ', kunyomi: 'うし', jlpt: 4 },
            { kanji: '馬', meaning: 'horse', onyomi: 'バ', kunyomi: 'うま, ま', jlpt: 4 },
            { kanji: '犬', meaning: 'dog', onyomi: 'ケン', kunyomi: 'いぬ', jlpt: 4 },
            { kanji: '料', meaning: 'fee, material', onyomi: 'リョウ', kunyomi: '', jlpt: 4 },
            { kanji: '理', meaning: 'reason, logic', onyomi: 'リ', kunyomi: '', jlpt: 4 },
            { kanji: '品', meaning: 'goods', onyomi: 'ヒン', kunyomi: 'しな', jlpt: 4 },
            { kanji: '物', meaning: 'thing', onyomi: 'ブツ, モツ', kunyomi: 'もの', jlpt: 4 },
            { kanji: '服', meaning: 'clothes', onyomi: 'フク', kunyomi: '', jlpt: 4 },
            { kanji: '薬', meaning: 'medicine', onyomi: 'ヤク', kunyomi: 'くすり', jlpt: 4 },
            { kanji: '酒', meaning: 'alcohol, sake', onyomi: 'シュ', kunyomi: 'さけ, さか', jlpt: 4 },
            { kanji: '飯', meaning: 'rice, meal', onyomi: 'ハン', kunyomi: 'めし', jlpt: 4 },
            
            // Actions & Verbs - N4
            { kanji: '走', meaning: 'run', onyomi: 'ソウ', kunyomi: 'はし', jlpt: 4 },
            { kanji: '歩', meaning: 'walk', onyomi: 'ホ, ブ', kunyomi: 'ある, あゆ', jlpt: 4 },
            { kanji: '止', meaning: 'stop', onyomi: 'シ', kunyomi: 'と, や', jlpt: 4 },
            { kanji: '動', meaning: 'move', onyomi: 'ドウ', kunyomi: 'うご', jlpt: 4 },
            { kanji: '働', meaning: 'work', onyomi: 'ドウ', kunyomi: 'はたら', jlpt: 4 },
            { kanji: '使', meaning: 'use', onyomi: 'シ', kunyomi: 'つか', jlpt: 4 },
            { kanji: '作', meaning: 'make', onyomi: 'サク, サ', kunyomi: 'つく', jlpt: 4 },
            { kanji: '売', meaning: 'sell', onyomi: 'バイ', kunyomi: 'う', jlpt: 4 },
            { kanji: '貸', meaning: 'lend', onyomi: 'タイ', kunyomi: 'か', jlpt: 4 },
            { kanji: '借', meaning: 'borrow', onyomi: 'シャク', kunyomi: 'か', jlpt: 4 },
            { kanji: '払', meaning: 'pay', onyomi: 'フツ', kunyomi: 'はら', jlpt: 4 },
            { kanji: '届', meaning: 'deliver', onyomi: 'トドケ', kunyomi: 'とど', jlpt: 4 },
            { kanji: '送', meaning: 'send', onyomi: 'ソウ', kunyomi: 'おく', jlpt: 4 },
            { kanji: '届', meaning: 'deliver', onyomi: 'トドケ', kunyomi: 'とど', jlpt: 4 },
        ];

        const vocabularyData = [
          
        { word: '学生', reading: 'がくせい', meaning: 'student' },
            { word: '先生', reading: 'せんせい', meaning: 'teacher' },
            { word: '友達', reading: 'ともだち', meaning: 'friend' },
            { word: '家族', reading: 'かぞく', meaning: 'family' },
            { word: '両親', reading: 'りょうしん', meaning: 'parents' },
            { word: '兄弟', reading: 'きょうだい', meaning: 'siblings' },
            { word: '彼女', reading: 'かのじょ', meaning: 'she, girlfriend' },
            { word: '彼', reading: 'かれ', meaning: 'he, boyfriend' },
            { word: '自分', reading: 'じぶん', meaning: 'oneself' },
            { word: '人', reading: 'ひと', meaning: 'person' },
            { word: '男', reading: 'おとこ', meaning: 'man' },
            { word: '女', reading: 'おんな', meaning: 'woman' },
            { word: '子供', reading: 'こども', meaning: 'child' },
            { word: '赤ちゃん', reading: 'あかちゃん', meaning: 'baby' },
            { word: 'お父さん', reading: 'おとうさん', meaning: 'father' },
            { word: 'お母さん', reading: 'おかあさん', meaning: 'mother' },
            { word: 'お兄さん', reading: 'おにいさん', meaning: 'older brother' },
            { word: 'お姉さん', reading: 'おねえさん', meaning: 'older sister' },
            { word: '弟', reading: 'おとうと', meaning: 'younger brother' },
            { word: '妹', reading: 'いもうと', meaning: 'younger sister' },
            { word: '息子', reading: 'むすこ', meaning: 'son' },
            { word: '娘', reading: 'むすめ', meaning: 'daughter' },
            { word: 'おじいさん', reading: 'おじいさん', meaning: 'grandfather' },
            { word: 'おばあさん', reading: 'おばあさん', meaning: 'grandmother' },
            { word: '奥さん', reading: 'おくさん', meaning: 'wife (polite)' },
            { word: '主人', reading: 'しゅじん', meaning: 'husband' },
            { word: '皆さん', reading: 'みなさん', meaning: 'everyone' },
            { word: '方', reading: 'かた', meaning: 'person (polite)' },
            
            // Time & Calendar
            { word: '今日', reading: 'きょう', meaning: 'today' },
            { word: '明日', reading: 'あした', meaning: 'tomorrow' },
            { word: '昨日', reading: 'きのう', meaning: 'yesterday' },
            { word: '毎日', reading: 'まいにち', meaning: 'every day' },
            { word: '今', reading: 'いま', meaning: 'now' },
            { word: '朝', reading: 'あさ', meaning: 'morning' },
            { word: '昼', reading: 'ひる', meaning: 'noon, daytime' },
            { word: '夜', reading: 'よる', meaning: 'night' },
            { word: '夕方', reading: 'ゆうがた', meaning: 'evening' },
            { word: '午前', reading: 'ごぜん', meaning: 'morning, AM' },
            { word: '午後', reading: 'ごご', meaning: 'afternoon, PM' },
            { word: '時間', reading: 'じかん', meaning: 'time, hour' },
            { word: '分', reading: 'ふん', meaning: 'minute' },
            { word: '半', reading: 'はん', meaning: 'half' },
            { word: '週', reading: 'しゅう', meaning: 'week' },
            { word: '週末', reading: 'しゅうまつ', meaning: 'weekend' },
            { word: '月', reading: 'つき', meaning: 'month, moon' },
            { word: '年', reading: 'とし', meaning: 'year' },
            { word: '今週', reading: 'こんしゅう', meaning: 'this week' },
            { word: '来週', reading: 'らいしゅう', meaning: 'next week' },
            { word: '先週', reading: 'せんしゅう', meaning: 'last week' },
            { word: '今月', reading: 'こんげつ', meaning: 'this month' },
            { word: '来月', reading: 'らいげつ', meaning: 'next month' },
            { word: '先月', reading: 'せんげつ', meaning: 'last month' },
            { word: '今年', reading: 'ことし', meaning: 'this year' },
            { word: '来年', reading: 'らいねん', meaning: 'next year' },
            { word: '去年', reading: 'きょねん', meaning: 'last year' },
            { word: '毎週', reading: 'まいしゅう', meaning: 'every week' },
            { word: '毎月', reading: 'まいつき', meaning: 'every month' },
            { word: '毎年', reading: 'まいとし', meaning: 'every year' },
            { word: '毎朝', reading: 'まいあさ', meaning: 'every morning' },
            { word: '毎晩', reading: 'まいばん', meaning: 'every night' },
            
            // Days of the Week
            { word: '日曜日', reading: 'にちようび', meaning: 'Sunday' },
            { word: '月曜日', reading: 'げつようび', meaning: 'Monday' },
            { word: '火曜日', reading: 'かようび', meaning: 'Tuesday' },
            { word: '水曜日', reading: 'すいようび', meaning: 'Wednesday' },
            { word: '木曜日', reading: 'もくようび', meaning: 'Thursday' },
            { word: '金曜日', reading: 'きんようび', meaning: 'Friday' },
            { word: '土曜日', reading: 'どようび', meaning: 'Saturday' },
            
            // Places
            { word: '日本', reading: 'にほん', meaning: 'Japan' },
            { word: '大学', reading: 'だいがく', meaning: 'university' },
            { word: '学校', reading: 'がっこう', meaning: 'school' },
            { word: '会社', reading: 'かいしゃ', meaning: 'company' },
            { word: '病院', reading: 'びょういん', meaning: 'hospital' },
            { word: '銀行', reading: 'ぎんこう', meaning: 'bank' },
            { word: '図書館', reading: 'としょかん', meaning: 'library' },
            { word: '空港', reading: 'くうこう', meaning: 'airport' },
            { word: '駅', reading: 'えき', meaning: 'train station' },
            { word: 'ホテル', reading: 'ほてる', meaning: 'hotel' },
            { word: 'レストラン', reading: 'れすとらん', meaning: 'restaurant' },
            { word: '喫茶店', reading: 'きっさてん', meaning: 'coffee shop' },
            { word: 'デパート', reading: 'でぱーと', meaning: 'department store' },
            { word: 'スーパー', reading: 'すーぱー', meaning: 'supermarket' },
            { word: 'コンビニ', reading: 'こんびに', meaning: 'convenience store' },
            { word: '店', reading: 'みせ', meaning: 'shop, store' },
            { word: '公園', reading: 'こうえん', meaning: 'park' },
            { word: '映画館', reading: 'えいがかん', meaning: 'movie theater' },
            { word: '郵便局', reading: 'ゆうびんきょく', meaning: 'post office' },
            { word: '交番', reading: 'こうばん', meaning: 'police box' },
            { word: '教室', reading: 'きょうしつ', meaning: 'classroom' },
            { word: '食堂', reading: 'しょくどう', meaning: 'cafeteria' },
            { word: 'トイレ', reading: 'といれ', meaning: 'toilet, bathroom' },
            { word: 'お手洗い', reading: 'おてあらい', meaning: 'bathroom (polite)' },
            { word: '部屋', reading: 'へや', meaning: 'room' },
            { word: '台所', reading: 'だいどころ', meaning: 'kitchen' },
            { word: '玄関', reading: 'げんかん', meaning: 'entrance' },
            { word: '庭', reading: 'にわ', meaning: 'garden' },
            { word: '家', reading: 'いえ', meaning: 'house, home' },
            { word: 'うち', reading: 'うち', meaning: 'home, house' },
            { word: 'アパート', reading: 'あぱーと', meaning: 'apartment' },
            { word: '国', reading: 'くに', meaning: 'country' },
            { word: '町', reading: 'まち', meaning: 'town' },
            { word: '村', reading: 'むら', meaning: 'village' },
            { word: '外国', reading: 'がいこく', meaning: 'foreign country' },
            { word: '海', reading: 'うみ', meaning: 'sea, ocean' },
            { word: '山', reading: 'やま', meaning: 'mountain' },
            { word: '川', reading: 'かわ', meaning: 'river' },
            { word: '池', reading: 'いけ', meaning: 'pond' },
            
            // Transportation
            { word: '電車', reading: 'でんしゃ', meaning: 'train' },
            { word: '車', reading: 'くるま', meaning: 'car' },
            { word: 'バス', reading: 'ばす', meaning: 'bus' },
            { word: 'タクシー', reading: 'たくしー', meaning: 'taxi' },
            { word: '飛行機', reading: 'ひこうき', meaning: 'airplane' },
            { word: '船', reading: 'ふね', meaning: 'ship, boat' },
            { word: '自転車', reading: 'じてんしゃ', meaning: 'bicycle' },
            { word: '地下鉄', reading: 'ちかてつ', meaning: 'subway' },
            { word: '道', reading: 'みち', meaning: 'road, way' },
            { word: '橋', reading: 'はし', meaning: 'bridge' },
            { word: '切符', reading: 'きっぷ', meaning: 'ticket' },
            
            // Food & Drink
            { word: '食べ物', reading: 'たべもの', meaning: 'food' },
            { word: '飲み物', reading: 'のみもの', meaning: 'drink' },
            { word: 'ご飯', reading: 'ごはん', meaning: 'rice, meal' },
            { word: 'パン', reading: 'ぱん', meaning: 'bread' },
            { word: '肉', reading: 'にく', meaning: 'meat' },
            { word: '魚', reading: 'さかな', meaning: 'fish' },
            { word: '野菜', reading: 'やさい', meaning: 'vegetables' },
            { word: '果物', reading: 'くだもの', meaning: 'fruit' },
            { word: '卵', reading: 'たまご', meaning: 'egg' },
            { word: '牛乳', reading: 'ぎゅうにゅう', meaning: 'milk' },
            { word: '水', reading: 'みず', meaning: 'water' },
            { word: 'お茶', reading: 'おちゃ', meaning: 'tea' },
            { word: 'コーヒー', reading: 'こーひー', meaning: 'coffee' },
            { word: 'ジュース', reading: 'じゅーす', meaning: 'juice' },
            { word: 'お酒', reading: 'おさけ', meaning: 'alcohol, sake' },
            { word: 'ビール', reading: 'びーる', meaning: 'beer' },
            { word: '朝ご飯', reading: 'あさごはん', meaning: 'breakfast' },
            { word: '昼ご飯', reading: 'ひるごはん', meaning: 'lunch' },
            { word: '晩ご飯', reading: 'ばんごはん', meaning: 'dinner' },
            { word: '弁当', reading: 'べんとう', meaning: 'lunch box' },
            { word: '料理', reading: 'りょうり', meaning: 'cooking, cuisine' },
            { word: '砂糖', reading: 'さとう', meaning: 'sugar' },
            { word: '塩', reading: 'しお', meaning: 'salt' },
            { word: 'りんご', reading: 'りんご', meaning: 'apple' },
            { word: 'みかん', reading: 'みかん', meaning: 'mandarin orange' },
            
            // Objects & Things
            { word: '本', reading: 'ほん', meaning: 'book' },
            { word: '新聞', reading: 'しんぶん', meaning: 'newspaper' },
            { word: '雑誌', reading: 'ざっし', meaning: 'magazine' },
            { word: '辞書', reading: 'じしょ', meaning: 'dictionary' },
            { word: 'ノート', reading: 'のーと', meaning: 'notebook' },
            { word: '鉛筆', reading: 'えんぴつ', meaning: 'pencil' },
            { word: 'ペン', reading: 'ぺん', meaning: 'pen' },
            { word: '消しゴム', reading: 'けしごむ', meaning: 'eraser' },
            { word: '紙', reading: 'かみ', meaning: 'paper' },
            { word: '手紙', reading: 'てがみ', meaning: 'letter' },
            { word: '封筒', reading: 'ふうとう', meaning: 'envelope' },
            { word: '切手', reading: 'きって', meaning: 'stamp' },
            { word: 'はがき', reading: 'はがき', meaning: 'postcard' },
            { word: '写真', reading: 'しゃしん', meaning: 'photograph' },
            { word: 'カメラ', reading: 'かめら', meaning: 'camera' },
            { word: '電話', reading: 'でんわ', meaning: 'telephone' },
            { word: 'テレビ', reading: 'てれび', meaning: 'television' },
            { word: 'ラジオ', reading: 'らじお', meaning: 'radio' },
            { word: 'パソコン', reading: 'ぱそこん', meaning: 'computer' },
            { word: '時計', reading: 'とけい', meaning: 'clock, watch' },
            { word: '傘', reading: 'かさ', meaning: 'umbrella' },
            { word: '鍵', reading: 'かぎ', meaning: 'key' },
            { word: '財布', reading: 'さいふ', meaning: 'wallet' },
            { word: 'かばん', reading: 'かばん', meaning: 'bag' },
            { word: '机', reading: 'つくえ', meaning: 'desk' },
            { word: '椅子', reading: 'いす', meaning: 'chair' },
            { word: 'テーブル', reading: 'てーぶる', meaning: 'table' },
            { word: 'ベッド', reading: 'べっど', meaning: 'bed' },
            { word: 'ドア', reading: 'どあ', meaning: 'door' },
            { word: '窓', reading: 'まど', meaning: 'window' },
            { word: '箱', reading: 'はこ', meaning: 'box' },
            { word: '花', reading: 'はな', meaning: 'flower' },
            { word: '木', reading: 'き', meaning: 'tree' },
            { word: '物', reading: 'もの', meaning: 'thing' },
            { word: 'お金', reading: 'おかね', meaning: 'money' },
            { word: '荷物', reading: 'にもつ', meaning: 'luggage' },
            { word: 'お土産', reading: 'おみやげ', meaning: 'souvenir' },
            { word: 'プレゼント', reading: 'ぷれぜんと', meaning: 'present, gift' },
            
            // Clothing
            { word: '服', reading: 'ふく', meaning: 'clothes' },
            { word: 'シャツ', reading: 'しゃつ', meaning: 'shirt' },
            { word: 'Tシャツ', reading: 'てぃーしゃつ', meaning: 'T-shirt' },
            { word: 'ズボン', reading: 'ずぼん', meaning: 'pants' },
            { word: 'スカート', reading: 'すかーと', meaning: 'skirt' },
            { word: '靴', reading: 'くつ', meaning: 'shoes' },
            { word: '靴下', reading: 'くつした', meaning: 'socks' },
            { word: '帽子', reading: 'ぼうし', meaning: 'hat, cap' },
            { word: 'コート', reading: 'こーと', meaning: 'coat' },
            { word: 'セーター', reading: 'せーたー', meaning: 'sweater' },
            { word: 'ネクタイ', reading: 'ねくたい', meaning: 'necktie' },
            { word: '眼鏡', reading: 'めがね', meaning: 'glasses' },
            
            // Body Parts
            { word: '体', reading: 'からだ', meaning: 'body' },
            { word: '頭', reading: 'あたま', meaning: 'head' },
            { word: '顔', reading: 'かお', meaning: 'face' },
            { word: '目', reading: 'め', meaning: 'eye' },
            { word: '耳', reading: 'みみ', meaning: 'ear' },
            { word: '鼻', reading: 'はな', meaning: 'nose' },
            { word: '口', reading: 'くち', meaning: 'mouth' },
            { word: '歯', reading: 'は', meaning: 'tooth' },
            { word: '手', reading: 'て', meaning: 'hand' },
            { word: '指', reading: 'ゆび', meaning: 'finger' },
            { word: '足', reading: 'あし', meaning: 'foot, leg' },
            { word: 'お腹', reading: 'おなか', meaning: 'stomach' },
            { word: '背', reading: 'せ', meaning: 'back, height' },
            { word: '声', reading: 'こえ', meaning: 'voice' },
            
            // Weather & Nature
            { word: '天気', reading: 'てんき', meaning: 'weather' },
            { word: '雨', reading: 'あめ', meaning: 'rain' },
            { word: '雪', reading: 'ゆき', meaning: 'snow' },
            { word: '風', reading: 'かぜ', meaning: 'wind' },
            { word: '空', reading: 'そら', meaning: 'sky' },
            { word: '雲', reading: 'くも', meaning: 'cloud' },
            { word: '太陽', reading: 'たいよう', meaning: 'sun' },
            { word: '春', reading: 'はる', meaning: 'spring' },
            { word: '夏', reading: 'なつ', meaning: 'summer' },
            { word: '秋', reading: 'あき', meaning: 'autumn' },
            { word: '冬', reading: 'ふゆ', meaning: 'winter' },
            
            // Colors
            { word: '色', reading: 'いろ', meaning: 'color' },
            { word: '赤', reading: 'あか', meaning: 'red' },
            { word: '青', reading: 'あお', meaning: 'blue' },
            { word: '白', reading: 'しろ', meaning: 'white' },
            { word: '黒', reading: 'くろ', meaning: 'black' },
            { word: '黄色', reading: 'きいろ', meaning: 'yellow' },
            { word: '緑', reading: 'みどり', meaning: 'green' },
            { word: '茶色', reading: 'ちゃいろ', meaning: 'brown' },
            
            // Activities & Actions
            { word: '仕事', reading: 'しごと', meaning: 'work, job' },
            { word: '勉強', reading: 'べんきょう', meaning: 'study' },
            { word: '旅行', reading: 'りょこう', meaning: 'travel' },
            { word: '買い物', reading: 'かいもの', meaning: 'shopping' },
            { word: '散歩', reading: 'さんぽ', meaning: 'walk, stroll' },
            { word: '練習', reading: 'れんしゅう', meaning: 'practice' },
            { word: '運動', reading: 'うんどう', meaning: 'exercise' },
            { word: '掃除', reading: 'そうじ', meaning: 'cleaning' },
            { word: '洗濯', reading: 'せんたく', meaning: 'laundry' },
            { word: '宿題', reading: 'しゅくだい', meaning: 'homework' },
            { word: '試験', reading: 'しけん', meaning: 'exam' },
            { word: '授業', reading: 'じゅぎょう', meaning: 'class, lesson' },
            { word: '休み', reading: 'やすみ', meaning: 'rest, holiday' },
            { word: '電話', reading: 'でんわ', meaning: 'phone call' },
            { word: '約束', reading: 'やくそく', meaning: 'promise, appointment' },
            
            // Entertainment & Hobbies
            { word: '映画', reading: 'えいが', meaning: 'movie' },
            { word: '音楽', reading: 'おんがく', meaning: 'music' },
            { word: '歌', reading: 'うた', meaning: 'song' },
            { word: 'スポーツ', reading: 'すぽーつ', meaning: 'sports' },
            { word: 'サッカー', reading: 'さっかー', meaning: 'soccer' },
            { word: '野球', reading: 'やきゅう', meaning: 'baseball' },
            { word: 'テニス', reading: 'てにす', meaning: 'tennis' },
            { word: '水泳', reading: 'すいえい', meaning: 'swimming' },
            { word: 'ゲーム', reading: 'げーむ', meaning: 'game' },
            { word: '趣味', reading: 'しゅみ', meaning: 'hobby' },
            { word: 'パーティー', reading: 'ぱーてぃー', meaning: 'party' },
            
            // Language & Communication
            { word: '日本語', reading: 'にほんご', meaning: 'Japanese language' },
            { word: '英語', reading: 'えいご', meaning: 'English language' },
            { word: '言葉', reading: 'ことば', meaning: 'word, language' },
            { word: '質問', reading: 'しつもん', meaning: 'question' },
            { word: '答え', reading: 'こたえ', meaning: 'answer' },
            { word: '意味', reading: 'いみ', meaning: 'meaning' },
            { word: '問題', reading: 'もんだい', meaning: 'problem, question' },
            { word: '話', reading: 'はなし', meaning: 'story, talk' },
            { word: '名前', reading: 'なまえ', meaning: 'name' },
            { word: '住所', reading: 'じゅうしょ', meaning: 'address' },
            { word: '番号', reading: 'ばんごう', meaning: 'number' },
            
            // Health & Feelings
            { word: '元気', reading: 'げんき', meaning: 'healthy, energetic' },
            { word: '病気', reading: 'びょうき', meaning: 'illness' },
            { word: '風邪', reading: 'かぜ', meaning: 'cold (illness)' },
            { word: '熱', reading: 'ねつ', meaning: 'fever' },
            { word: '薬', reading: 'くすり', meaning: 'medicine' },
            { word: '気持ち', reading: 'きもち', meaning: 'feeling' },
            
            // Direction & Position
            { word: '上', reading: 'うえ', meaning: 'above, up' },
            { word: '下', reading: 'した', meaning: 'below, down' },
            { word: '前', reading: 'まえ', meaning: 'front, before' },
            { word: '後ろ', reading: 'うしろ', meaning: 'behind' },
            { word: '右', reading: 'みぎ', meaning: 'right' },
            { word: '左', reading: 'ひだり', meaning: 'left' },
            { word: '中', reading: 'なか', meaning: 'inside, middle' },
            { word: '外', reading: 'そと', meaning: 'outside' },
            { word: '隣', reading: 'となり', meaning: 'next to' },
            { word: '近く', reading: 'ちかく', meaning: 'nearby' },
            { word: '遠く', reading: 'とおく', meaning: 'far away' },
            { word: '北', reading: 'きた', meaning: 'north' },
            { word: '南', reading: 'みなみ', meaning: 'south' },
            { word: '東', reading: 'ひがし', meaning: 'east' },
            { word: '西', reading: 'にし', meaning: 'west' },
            { word: 'そば', reading: 'そば', meaning: 'near, beside' },
            { word: '向こう', reading: 'むこう', meaning: 'over there' },
            { word: '間', reading: 'あいだ', meaning: 'between' },
            { word: '横', reading: 'よこ', meaning: 'side, beside' },
            
            // Numbers & Counters
            { word: '一つ', reading: 'ひとつ', meaning: 'one (thing)' },
            { word: '二つ', reading: 'ふたつ', meaning: 'two (things)' },
            { word: '三つ', reading: 'みっつ', meaning: 'three (things)' },
            { word: '四つ', reading: 'よっつ', meaning: 'four (things)' },
            { word: '五つ', reading: 'いつつ', meaning: 'five (things)' },
            { word: '六つ', reading: 'むっつ', meaning: 'six (things)' },
            { word: '七つ', reading: 'ななつ', meaning: 'seven (things)' },
            { word: '八つ', reading: 'やっつ', meaning: 'eight (things)' },
            { word: '九つ', reading: 'ここのつ', meaning: 'nine (things)' },
            { word: '十', reading: 'とお', meaning: 'ten (things)' },
            { word: '一人', reading: 'ひとり', meaning: 'one person' },
            { word: '二人', reading: 'ふたり', meaning: 'two people' },
            
            // Adjectives (as nouns)
            { word: '大きさ', reading: 'おおきさ', meaning: 'size' },
            { word: '重さ', reading: 'おもさ', meaning: 'weight' },
            { word: '長さ', reading: 'ながさ', meaning: 'length' },
            { word: '高さ', reading: 'たかさ', meaning: 'height' },
            
            // Other Common Words
            { word: '事', reading: 'こと', meaning: 'thing, matter' },
            { word: '所', reading: 'ところ', meaning: 'place' },
            { word: '側', reading: 'がわ', meaning: 'side' },
            { word: '初めて', reading: 'はじめて', meaning: 'first time' },
            { word: '最後', reading: 'さいご', meaning: 'last' },
            { word: '最初', reading: 'さいしょ', meaning: 'first, beginning' },
            { word: '全部', reading: 'ぜんぶ', meaning: 'all, everything' },
            { word: '半分', reading: 'はんぶん', meaning: 'half' },
            { word: '大変', reading: 'たいへん', meaning: 'very, difficult' },
            { word: '大丈夫', reading: 'だいじょうぶ', meaning: 'okay, all right' },
            { word: '本当', reading: 'ほんとう', meaning: 'really, truth' },
            { word: '普通', reading: 'ふつう', meaning: 'normal, ordinary' },
            { word: '特別', reading: 'とくべつ', meaning: 'special' },
            { word: '大切', reading: 'たいせつ', meaning: 'important' },
            { word: '必要', reading: 'ひつよう', meaning: 'necessary' },
            { word: '無理', reading: 'むり', meaning: 'impossible' },
            { word: '結構', reading: 'けっこう', meaning: 'quite, fairly' },
            { word: '多分', reading: 'たぶん', meaning: 'probably' },
            { word: 'もちろん', reading: 'もちろん', meaning: 'of course' },
            { word: 'ちょっと', reading: 'ちょっと', meaning: 'a little' },
            { word: 'たくさん', reading: 'たくさん', meaning: 'many, a lot' },
            { word: '少し', reading: 'すこし', meaning: 'a little' },
            { word: 'もっと', reading: 'もっと', meaning: 'more' },
            { word: 'まだ', reading: 'まだ', meaning: 'still, not yet' },
            { word: 'もう', reading: 'もう', meaning: 'already' },
            { word: 'いつも', reading: 'いつも', meaning: 'always' },
            { word: 'よく', reading: 'よく', meaning: 'often, well' },
            { word: '時々', reading: 'ときどき', meaning: 'sometimes' },
            { word: 'あまり', reading: 'あまり', meaning: 'not very' },
            { word: '全然', reading: 'ぜんぜん', meaning: 'not at all' },
            { word: '一緒に', reading: 'いっしょに', meaning: 'together' },
            { word: 'だんだん', reading: 'だんだん', meaning: 'gradually' },
            { word: 'すぐ', reading: 'すぐ', meaning: 'immediately' },
            { word: 'ゆっくり', reading: 'ゆっくり', meaning: 'slowly' },
            { word: '初めまして', reading: 'はじめまして', meaning: 'nice to meet you' },
            { word: 'どうも', reading: 'どうも', meaning: 'thanks, hello' },
            { word: 'どうぞ', reading: 'どうぞ', meaning: 'please, go ahead' },
            { word: 'すみません', reading: 'すみません', meaning: 'excuse me, sorry' },
            { word: 'ごめんなさい', reading: 'ごめんなさい', meaning: 'I am sorry' },

        ];

        // ==================== GAME STATE ====================
        let gameState = {
            mode: null,
            questions: [],
            currentQuestion: 0,
            score: 0,
            correctCount: 0,
            startTime: null,
            totalTime: 0,
            answers: [],
            streak: 0,
            maxStreak: 0
        };

        let timerInterval = null;

        // ==================== UTILITY FUNCTIONS ====================
        function getTodayKey() {
            const today = new Date();
            return `${today.getFullYear()}-${String(today.getMonth() + 1).padStart(2, '0')}-${String(today.getDate()).padStart(2, '0')}`;
        }

        function seededRandom(seed) {
            const x = Math.sin(seed++) * 10000;
            return x - Math.floor(x);
        }

        function shuffleWithSeed(array, seed) {
            const result = [...array];
            for (let i = result.length - 1; i > 0; i--) {
                const j = Math.floor(seededRandom(seed + i) * (i + 1));
                [result[i], result[j]] = [result[j], result[i]];
            }
            return result;
        }

        function formatTime(seconds) {
            const mins = Math.floor(seconds / 60);
            const secs = seconds % 60;
            return `${mins}:${String(secs).padStart(2, '0')}`;
        }

        function getDateSeed() {
            const today = new Date();
            return today.getFullYear() * 10000 + (today.getMonth() + 1) * 100 + today.getDate();
        }

        // ==================== DISPLAY FUNCTIONS ====================
        function showScreen(screenId) {
            document.querySelectorAll('.screen').forEach(s => s.classList.remove('active'));
            document.getElementById(screenId).classList.add('active');
        }

        function updateDateDisplay() {
            const options = { weekday: 'long', year: 'numeric', month: 'long', day: 'numeric' };
            document.getElementById('dateDisplay').textContent = new Date().toLocaleDateString('en-US', options);
        }

        // ==================== QUESTION GENERATION ====================
        function generateQuestions(mode) {
            const seed = getDateSeed();
            const questions = [];
            const numQuestions = 10;

            if (mode === 'kanji' || mode === 'reading') {
                const shuffledKanji = shuffleWithSeed(kanjiData, seed + (mode === 'reading' ? 1000 : 0));
                const selected = shuffledKanji.slice(0, numQuestions);

                selected.forEach((item, idx) => {
                    const otherKanji = shuffledKanji.filter(k => k !== item);
                    const wrongOptions = shuffleWithSeed(otherKanji, seed + idx).slice(0, 3);

                    if (mode === 'kanji') {
                        const options = shuffleWithSeed([
                            { text: item.meaning, correct: true },
                            ...wrongOptions.map(k => ({ text: k.meaning, correct: false }))
                        ], seed + idx + 100);

                        questions.push({
                            type: 'kanji-meaning',
                            kanji: item.kanji,
                            correctAnswer: item.meaning,
                            options: options
                        });
                    } else {
                        const readings = item.kunyomi ? item.kunyomi.split(', ')[0] : item.onyomi.split(', ')[0];
                        const wrongReadings = wrongOptions.map(k => k.kunyomi ? k.kunyomi.split(', ')[0] : k.onyomi.split(', ')[0]);
                        
                        const options = shuffleWithSeed([
                            { text: readings, correct: true },
                            ...wrongReadings.map(r => ({ text: r, correct: false }))
                        ], seed + idx + 200);

                        questions.push({
                            type: 'kanji-reading',
                            kanji: item.kanji,
                            correctAnswer: readings,
                            options: options
                        });
                    }
                });
            } else if (mode === 'word') {
                const shuffledVocab = shuffleWithSeed(vocabularyData, seed + 2000);
                const selected = shuffledVocab.slice(0, numQuestions);

                selected.forEach((item, idx) => {
                    const otherVocab = shuffledVocab.filter(v => v !== item);
                    const wrongOptions = shuffleWithSeed(otherVocab, seed + idx + 300).slice(0, 3);

                    const options = shuffleWithSeed([
                        { text: item.meaning, correct: true },
                        ...wrongOptions.map(v => ({ text: v.meaning, correct: false }))
                    ], seed + idx + 400);

                    questions.push({
                        type: 'vocabulary',
                        word: item.word,
                        reading: item.reading,
                        correctAnswer: item.meaning,
                        options: options
                    });
                });
            } else if (mode === 'mixed') {
                const shuffledKanji = shuffleWithSeed(kanjiData, seed + 3000);
                const shuffledVocab = shuffleWithSeed(vocabularyData, seed + 4000);

                for (let i = 0; i < numQuestions; i++) {
                    const questionType = seededRandom(seed + i * 10) > 0.5 ? 'kanji' : 'vocab';

                    if (questionType === 'kanji') {
                        const item = shuffledKanji[i % shuffledKanji.length];
                        const otherKanji = shuffledKanji.filter(k => k !== item);
                        const wrongOptions = shuffleWithSeed(otherKanji, seed + i + 500).slice(0, 3);

                        const options = shuffleWithSeed([
                            { text: item.meaning, correct: true },
                            ...wrongOptions.map(k => ({ text: k.meaning, correct: false }))
                        ], seed + i + 600);

                        questions.push({
                            type: 'kanji-meaning',
                            kanji: item.kanji,
                            correctAnswer: item.meaning,
                            options: options
                        });
                    } else {
                        const item = shuffledVocab[i % shuffledVocab.length];
                        const otherVocab = shuffledVocab.filter(v => v !== item);
                        const wrongOptions = shuffleWithSeed(otherVocab, seed + i + 700).slice(0, 3);

                        const options = shuffleWithSeed([
                            { text: item.meaning, correct: true },
                            ...wrongOptions.map(v => ({ text: v.meaning, correct: false }))
                        ], seed + i + 800);

                        questions.push({
                            type: 'vocabulary',
                            word: item.word,
                            reading: item.reading,
                            correctAnswer: item.meaning,
                            options: options
                        });
                    }
                }
            }

            return questions;
        }

        // ==================== GAME LOGIC ====================
        function startGame(mode) {
            const storageKey = `dailynihongo-${mode}-${getTodayKey()}`;
            const savedGame = localStorage.getItem(storageKey);

            if (savedGame) {
                const saved = JSON.parse(savedGame);
                showAlreadyPlayed(saved, mode);
                return;
            }

            gameState = {
                mode: mode,
                questions: generateQuestions(mode),
                currentQuestion: 0,
                score: 0,
                correctCount: 0,
                startTime: Date.now(),
                totalTime: 0,
                answers: [],
                streak: 0,
                maxStreak: 0
            };

            document.getElementById('totalQuestions').textContent = gameState.questions.length;
            showScreen('quizScreen');
            startTimer();
            displayQuestion();
        }

        function startTimer() {
            const timerEl = document.getElementById('timer');
            timerInterval = setInterval(() => {
                const elapsed = Math.floor((Date.now() - gameState.startTime) / 1000);
                timerEl.textContent = formatTime(elapsed);
                
                if (elapsed > 120) {
                    timerEl.classList.add('warning');
                }
            }, 1000);
        }

        function stopTimer() {
            clearInterval(timerInterval);
            gameState.totalTime = Math.floor((Date.now() - gameState.startTime) / 1000);
        }

        function displayQuestion() {
            const question = gameState.questions[gameState.currentQuestion];
            const container = document.getElementById('questionContainer');
            const answerArea = document.getElementById('answerArea');
            const feedbackArea = document.getElementById('feedbackArea');

            feedbackArea.style.display = 'none';
            document.getElementById('questionNum').textContent = gameState.currentQuestion + 1;

            if (question.type === 'kanji-meaning') {
                container.innerHTML = `
                    <div class="question-type">What does this kanji mean?</div>
                    <div class="kanji-display">${question.kanji}</div>
                `;
            } else if (question.type === 'kanji-reading') {
                container.innerHTML = `
                    <div class="question-type">How do you read this kanji?</div>
                    <div class="kanji-display">${question.kanji}</div>
                `;
            } else if (question.type === 'vocabulary') {
                container.innerHTML = `
                    <div class="question-type">What does this word mean?</div>
                    <div class="word-display">${question.word}</div>
                    <div class="reading-hint">${question.reading}</div>
                `;
            }

            answerArea.innerHTML = `
                <div class="options-grid">
                    ${question.options.map((opt, idx) => `
                        <button class="option-btn" data-index="${idx}" onclick="selectAnswer(${idx})">
                            ${opt.text}
                        </button>
                    `).join('')}
                </div>
            `;
        }

        function selectAnswer(index) {
            const question = gameState.questions[gameState.currentQuestion];
            const selectedOption = question.options[index];
            const buttons = document.querySelectorAll('.option-btn');
            const feedbackArea = document.getElementById('feedbackArea');

            buttons.forEach(btn => btn.disabled = true);

            const isCorrect = selectedOption.correct;
            buttons[index].classList.add(isCorrect ? 'correct' : 'incorrect');

            if (!isCorrect) {
                const correctIdx = question.options.findIndex(o => o.correct);
                buttons[correctIdx].classList.add('correct');
            }

            // Update game state
            if (isCorrect) {
                gameState.correctCount++;
                gameState.streak++;
                gameState.maxStreak = Math.max(gameState.maxStreak, gameState.streak);
                
                // Score calculation: base points + speed bonus + streak bonus
                const timeBonus = Math.max(0, 100 - Math.floor((Date.now() - gameState.startTime) / 1000));
                const streakBonus = gameState.streak * 10;
                gameState.score += 100 + timeBonus + streakBonus;
            } else {
                gameState.streak = 0;
            }

            gameState.answers.push({
                question: question,
                selected: selectedOption.text,
                correct: isCorrect
            });

            // Show feedback
            feedbackArea.innerHTML = `
                <div class="feedback ${isCorrect ? 'correct' : 'incorrect'}">
                    <div class="feedback-icon">${isCorrect ? '◯' : '✕'}</div>
                    <div class="feedback-text">${isCorrect ? 'Correct!' : 'Incorrect'}</div>
                    ${!isCorrect ? `<div class="correct-answer">The answer was: ${question.correctAnswer}</div>` : ''}
                </div>
            `;
            feedbackArea.style.display = 'block';

            // Auto-advance after a short delay
            const delay = isCorrect ? 800 : 1500; // Longer delay for incorrect to show answer
            setTimeout(() => {
                nextQuestion();
            }, delay);
        }

        function nextQuestion() {
            gameState.currentQuestion++;

            if (gameState.currentQuestion >= gameState.questions.length) {
                endGame();
            } else {
                displayQuestion();
            }
        }

        function endGame() {
            stopTimer();
            
            const result = {
                mode: gameState.mode,
                score: gameState.score,
                correct: gameState.correctCount,
                total: gameState.questions.length,
                time: gameState.totalTime,
                streak: gameState.maxStreak,
                date: getTodayKey(),
                answers: gameState.answers
            };

            // Save to localStorage
            const storageKey = `dailynihongo-${gameState.mode}-${getTodayKey()}`;
            localStorage.setItem(storageKey, JSON.stringify(result));

            // Update streak
            updateDailyStreak();

            // Display results
            displayResults(result);
        }

        function displayResults(result) {
            showScreen('resultsScreen');

            document.getElementById('resultsDate').textContent = new Date().toLocaleDateString('en-US', {
                weekday: 'long',
                year: 'numeric',
                month: 'long',
                day: 'numeric'
            });

            document.getElementById('finalScore').textContent = result.score;
            document.getElementById('correctCount').textContent = `${result.correct}/${result.total}`;
            document.getElementById('totalTime').textContent = formatTime(result.time);
            document.getElementById('streakCount').textContent = getDailyStreak();

            // Generate share grid
            const shareGrid = result.answers.map(a => a.correct ? '🟢' : '🔴').join('');
            const shareText = `漢字道 ${getTodayKey()}\n${shareGrid}\nScore: ${result.score} | Time: ${formatTime(result.time)}`;
            document.getElementById('shareGrid').textContent = shareText;

            // Check and update personal bests
            const newRecords = updatePersonalBests(result);
            displayPersonalBests(result, newRecords);
        }

        function getPersonalBests(mode) {
            const key = `dailynihongo-pb-${mode}`;
            const stored = localStorage.getItem(key);
            return stored ? JSON.parse(stored) : null;
        }

        function updatePersonalBests(result) {
            const key = `dailynihongo-pb-${result.mode}`;
            const current = getPersonalBests(result.mode);
            const newRecords = {
                score: false,
                time: false,
                accuracy: false
            };

            const accuracy = result.correct / result.total;

            if (!current) {
                // First time playing this mode
                localStorage.setItem(key, JSON.stringify({
                    bestScore: result.score,
                    bestScoreDate: result.date,
                    bestTime: result.time,
                    bestTimeDate: result.date,
                    bestAccuracy: accuracy,
                    bestAccuracyDate: result.date,
                    gamesPlayed: 1
                }));
                newRecords.score = true;
                newRecords.time = true;
                newRecords.accuracy = true;
            } else {
                let updated = { ...current, gamesPlayed: current.gamesPlayed + 1 };

                if (result.score > current.bestScore) {
                    updated.bestScore = result.score;
                    updated.bestScoreDate = result.date;
                    newRecords.score = true;
                }

                if (result.time < current.bestTime) {
                    updated.bestTime = result.time;
                    updated.bestTimeDate = result.date;
                    newRecords.time = true;
                }

                if (accuracy > current.bestAccuracy) {
                    updated.bestAccuracy = accuracy;
                    updated.bestAccuracyDate = result.date;
                    newRecords.accuracy = true;
                }

                localStorage.setItem(key, updated);
                localStorage.setItem(key, JSON.stringify(updated));
            }

            return newRecords;
        }

        function displayPersonalBests(result, newRecords) {
            const pb = getPersonalBests(result.mode);
            const container = document.getElementById('personalBests');
            
            if (!pb) {
                container.innerHTML = '<div class="no-pb">Play more to track your progress!</div>';
                return;
            }

            const accuracy = result.correct / result.total;
            const modeNames = {
                'kanji': 'Kanji Meaning',
                'reading': 'Kanji Reading',
                'word': 'Vocabulary',
                'mixed': 'Mixed Challenge'
            };

            const formatDate = (dateStr) => {
                const [year, month, day] = dateStr.split('-');
                return `${month}/${day}`;
            };

            const scoreImprovement = result.score - pb.bestScore;
            const timeImprovement = pb.bestTime - result.time;
            const accuracyImprovement = ((accuracy - pb.bestAccuracy) * 100).toFixed(0);

            container.innerHTML = `
                <div class="pb-item" style="background: rgba(26,26,26,0.03); border-bottom: 1px solid rgba(26,26,26,0.1);">
                    <span class="pb-label" style="font-size: 0.8rem; color: var(--moss);">${modeNames[result.mode]} • ${pb.gamesPlayed} games played</span>
                </div>
                <div class="pb-item ${newRecords.score ? 'new-record' : ''}">
                    <span class="pb-label">
                        Best Score
                        ${newRecords.score ? '<span class="new-record-badge">New!</span>' : ''}
                    </span>
                    <span class="pb-value">${pb.bestScore}</span>
                    <span class="pb-date">${formatDate(pb.bestScoreDate)}</span>
                </div>
                <div class="pb-item ${newRecords.time ? 'new-record' : ''}">
                    <span class="pb-label">
                        Fastest Time
                        ${newRecords.time ? '<span class="new-record-badge">New!</span>' : ''}
                    </span>
                    <span class="pb-value">${formatTime(pb.bestTime)}</span>
                    <span class="pb-date">${formatDate(pb.bestTimeDate)}</span>
                </div>
                <div class="pb-item ${newRecords.accuracy ? 'new-record' : ''}">
                    <span class="pb-label">
                        Best Accuracy
                        ${newRecords.accuracy ? '<span class="new-record-badge">New!</span>' : ''}
                    </span>
                    <span class="pb-value">${Math.round(pb.bestAccuracy * 100)}%</span>
                    <span class="pb-date">${formatDate(pb.bestAccuracyDate)}</span>
                </div>
                <div class="pb-item" style="border-top: 1px solid rgba(26,26,26,0.1); margin-top: 0.5rem; padding-top: 1rem;">
                    <span class="pb-label" style="font-size: 0.85rem; color: var(--moss);">Today's Results</span>
                </div>
                <div class="pb-item">
                    <span class="pb-label">Score</span>
                    <span class="pb-value">${result.score}</span>
                    ${!newRecords.score ? `<span class="improvement ${scoreImprovement >= 0 ? '' : 'negative'}">${scoreImprovement >= 0 ? '+' : ''}${scoreImprovement} from best</span>` : '<span class="pb-date"></span>'}
                </div>
                <div class="pb-item">
                    <span class="pb-label">Time</span>
                    <span class="pb-value">${formatTime(result.time)}</span>
                    ${!newRecords.time ? `<span class="improvement ${timeImprovement >= 0 ? '' : 'negative'}">${timeImprovement >= 0 ? '+' : ''}${timeImprovement}s ${timeImprovement >= 0 ? 'faster' : 'slower'}</span>` : '<span class="pb-date"></span>'}
                </div>
                <div class="pb-item">
                    <span class="pb-label">Accuracy</span>
                    <span class="pb-value">${Math.round(accuracy * 100)}%</span>
                    ${!newRecords.accuracy ? `<span class="improvement ${parseFloat(accuracyImprovement) >= 0 ? '' : 'negative'}">${parseFloat(accuracyImprovement) >= 0 ? '+' : ''}${accuracyImprovement}%</span>` : '<span class="pb-date"></span>'}
                </div>
            `;
        }

        function copyResults() {
            const shareText = document.getElementById('shareGrid').textContent;
            navigator.clipboard.writeText(shareText).then(() => {
                const btn = document.getElementById('copyBtn');
                btn.textContent = 'Copied!';
                btn.classList.add('copied');
                setTimeout(() => {
                    btn.textContent = 'Copy Results';
                    btn.classList.remove('copied');
                }, 2000);
            });
        }

        function showAlreadyPlayed(saved, mode) {
            showScreen('alreadyPlayedScreen');
            
            // Show countdown to next day
            updateCountdown();
            setInterval(updateCountdown, 1000);

            // Show previous results
            const prevResults = document.getElementById('previousResults');
            prevResults.innerHTML = `
                <div class="score-display">
                    <div class="score-number">${saved.score}</div>
                    <div class="score-label">Your Score</div>
                </div>
                <div class="stats-grid">
                    <div class="stat-item">
                        <div class="stat-value">${saved.correct}/${saved.total}</div>
                        <div class="stat-label">Correct</div>
                    </div>
                    <div class="stat-item">
                        <div class="stat-value">${formatTime(saved.time)}</div>
                        <div class="stat-label">Time</div>
                    </div>
                    <div class="stat-item">
                        <div class="stat-value">${getDailyStreak()}</div>
                        <div class="stat-label">Streak</div>
                    </div>
                </div>
                <button class="play-again-btn" onclick="showScreen('startScreen')">Try Another Mode</button>
            `;
        }

        function updateCountdown() {
            const now = new Date();
            const tomorrow = new Date(now);
            tomorrow.setDate(tomorrow.getDate() + 1);
            tomorrow.setHours(0, 0, 0, 0);
            
            const diff = tomorrow - now;
            const hours = Math.floor(diff / (1000 * 60 * 60));
            const minutes = Math.floor((diff % (1000 * 60 * 60)) / (1000 * 60));
            const seconds = Math.floor((diff % (1000 * 60)) / 1000);

            document.getElementById('comebackTime').textContent = 
                `${String(hours).padStart(2, '0')}:${String(minutes).padStart(2, '0')}:${String(seconds).padStart(2, '0')}`;
        }

        function getDailyStreak() {
            const streak = localStorage.getItem('dailynihongo-streak') || '0';
            return parseInt(streak);
        }

        function updateDailyStreak() {
            const lastPlayed = localStorage.getItem('dailynihongo-last-played');
            const today = getTodayKey();
            
            if (!lastPlayed) {
                localStorage.setItem('dailynihongo-streak', '1');
            } else {
                const yesterday = new Date();
                yesterday.setDate(yesterday.getDate() - 1);
                const yesterdayKey = `${yesterday.getFullYear()}-${String(yesterday.getMonth() + 1).padStart(2, '0')}-${String(yesterday.getDate()).padStart(2, '0')}`;

                if (lastPlayed === yesterdayKey) {
                    const currentStreak = getDailyStreak();
                    localStorage.setItem('dailynihongo-streak', String(currentStreak + 1));
                } else if (lastPlayed !== today) {
                    localStorage.setItem('dailynihongo-streak', '1');
                }
            }

            localStorage.setItem('dailynihongo-last-played', today);
        }

        // ==================== PAGE NAVIGATION ====================
        function showPage(page) {
            // Hide all screens
            document.querySelectorAll('.screen').forEach(s => s.classList.remove('active'));
            
            // Show the requested page
            if (page === 'game') {
                document.getElementById('startScreen').classList.add('active');
            } else if (page === 'about') {
                document.getElementById('aboutPage').classList.add('active');
            } else if (page === 'contact') {
                document.getElementById('contactPage').classList.add('active');
                // Reset contact form
                document.getElementById('contactSuccess').style.display = 'none';
                document.querySelector('.contact-form').style.display = 'block';
            } else if (page === 'privacy') {
                document.getElementById('privacyPage').classList.add('active');
            } else if (page === 'terms') {
                document.getElementById('termsPage').classList.add('active');
            }
            
            // Scroll to top
            window.scrollTo(0, 0);
        }

        function submitContact() {
            const name = document.getElementById('contactName').value.trim();
            const email = document.getElementById('contactEmail').value.trim();
            const subject = document.getElementById('contactSubject').value;
            const message = document.getElementById('contactMessage').value.trim();

            // Basic validation
            if (!name || !email || !subject || !message) {
                alert('Please fill in all fields.');
                return;
            }

            if (!email.includes('@')) {
                alert('Please enter a valid email address.');
                return;
            }

            // In a real implementation, this would send to a server
            // For now, just show success message
            document.querySelector('.contact-form').style.display = 'none';
            document.getElementById('contactSuccess').style.display = 'block';

            // Clear form
            document.getElementById('contactName').value = '';
            document.getElementById('contactEmail').value = '';
            document.getElementById('contactSubject').value = '';
            document.getElementById('contactMessage').value = '';
        }

        // ==================== INITIALIZATION ====================
        document.addEventListener('DOMContentLoaded', () => {
            updateDateDisplay();
        });
    </script>
</body>
</html>